<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>kdtree</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);


  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', "dark");
    toggleSwitch.checked = true;
  } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', "light");
    toggleSwitch.checked = false;
  } else {
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
    if (currentTheme) {
      document.documentElement.setAttribute('data-theme', currentTheme);

      if (currentTheme === 'dark') {
        toggleSwitch.checked = true;
      }
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">kdtree</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#KdPoint"
    title="KdPoint = array[K, float]"><wbr />Kd<wbr />Point<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#KdTree"
    title="KdTree[T] = ref object
  root*: KdNode[T]
  len: int"><wbr />Kd<wbr />Tree<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#HyperRectangle"
    title="HyperRectangle = ref object
  min*: KdPoint
  max*: KdPoint"><wbr />Hyper<wbr />Rectangle<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#10" id="60">Consts</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#K"
    title="K = 2"><wbr />K<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#13" id="63">Funcs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#newKdTree%2CopenArray%5BKdPoint%5D%2CopenArray%5BT%5D"
    title="newKdTree[T](points: openArray[KdPoint]; data: openArray[T]): KdTree[T]"><wbr />new<wbr />Kd<wbr />Tree<span class="attachedType">KdPoint</span></a></li>
  <li><a class="reference" href="#add%2CKdTree%5BT%5D%2CKdPoint%2CT"
    title="add[T](tree: var KdTree[T]; point: KdPoint; data: T)"><wbr />add<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#len%2CKdTree%5BT%5D"
    title="len[T](tree: KdTree[T]): int"><wbr />len<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#height%2CKdTree%5BT%5D"
    title="height[T](tree: var KdTree[T]): int"><wbr />height<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#isBalanced%2CKdTree%5BT%5D"
    title="isBalanced[T](tree: var KdTree[T]): int"><wbr />is<wbr />Balanced<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#rebalance%2CKdTree%5BT%5D"
    title="rebalance[T](tree: var KdTree[T])"><wbr />rebalance<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#nearestNieghbour%2CKdTree%5BT%5D%2CKdPoint"
    title="nearestNieghbour[T](tree: var KdTree[T]; point: KdPoint; squaredDist = false): (KdPoint,
    T, float)"><wbr />nearest<wbr />Nieghbour<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#nearestNieghbours%2CKdTree%5BT%5D%2CKdPoint%2Cint"
    title="nearestNieghbours[T](tree: var KdTree[T]; point: KdPoint; numNeighbours: int;
                     squaredDist = false): seq[(KdPoint, T, float)]"><wbr />nearest<wbr />Nieghbours<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#withinRadius%2CKdTree%5BT%5D%2CKdPoint%2Cfloat"
    title="withinRadius[T](tree: var KdTree[T]; point: KdPoint; radius: float;
                squaredDist = false; sortResults = false): seq[(KdPoint, T, float)]"><wbr />within<wbr />Radius<span class="attachedType">KdTree</span></a></li>
  <li><a class="reference" href="#newHyperRectangle%2CKdPoint%2CKdPoint"
    title="newHyperRectangle(min: KdPoint; max: KdPoint): HyperRectangle"><wbr />new<wbr />Hyper<wbr />Rectangle<span class="attachedType">KdPoint</span></a></li>
  <li><a class="reference" href="#withinRange%2CKdTree%5BT%5D%2CHyperRectangle"
    title="withinRange[T](tree: var KdTree[T]; rectangle: HyperRectangle): seq[(KdPoint, T)]"><wbr />within<wbr />Range<span class="attachedType">KdTree</span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc">kdtree is a pure Nim k-d tree implementation. k-d trees are data structures for performing efficient spatial query operations on point data sets.<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">random</span><span class="Punctuation">,</span> <span class="Identifier">strformat</span>
<span class="Keyword">import</span> <span class="Identifier">kdtree</span>

<span class="Keyword">let</span> <span class="Identifier">numPoints</span> <span class="Operator">=</span> <span class="DecNumber">100_000</span>
<span class="Keyword">var</span>
  <span class="Identifier">points</span> <span class="Operator">=</span> <span class="Identifier">newSeqOfCap</span><span class="Punctuation">[</span><span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="Identifier">float</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">numPoints</span><span class="Punctuation">)</span>
  <span class="Identifier">values</span> <span class="Operator">=</span> <span class="Identifier">newSeqOfCap</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">numPoints</span><span class="Punctuation">)</span>
  <span class="Identifier">x</span><span class="Punctuation">:</span> <span class="Identifier">float</span>
  <span class="Identifier">y</span><span class="Punctuation">:</span> <span class="Identifier">float</span>

<span class="Keyword">for</span> <span class="Identifier">a</span> <span class="Keyword">in</span> <span class="FloatNumber">0.</span><span class="Operator">.&lt;</span><span class="Identifier">numPoints</span><span class="Punctuation">:</span>
  <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">rand</span><span class="Punctuation">(</span><span class="DecNumber">100_000</span><span class="Punctuation">)</span> <span class="Operator">/</span> <span class="DecNumber">1000</span>
  <span class="Identifier">y</span> <span class="Operator">=</span> <span class="Identifier">rand</span><span class="Punctuation">(</span><span class="DecNumber">100_000</span><span class="Punctuation">)</span> <span class="Operator">/</span> <span class="DecNumber">1000</span>
  <span class="Identifier">points</span><span class="Operator">.</span><span class="Identifier">add</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Identifier">values</span><span class="Operator">.</span><span class="Identifier">add</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="RawData">fmt&quot;Building tree of {numPoints} random points...&quot;</span>
<span class="Keyword">var</span> <span class="Identifier">tree</span> <span class="Operator">=</span> <span class="Identifier">newKdTree</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">points</span><span class="Punctuation">,</span> <span class="Identifier">values</span><span class="Punctuation">)</span>

<span class="Comment"># Perform nearestNeighour searches</span>
<span class="Keyword">let</span> <span class="Identifier">numSearches</span> <span class="Operator">=</span> <span class="DecNumber">10_000</span>
<span class="Keyword">for</span> <span class="Identifier">a</span> <span class="Keyword">in</span> <span class="FloatNumber">0.</span><span class="Operator">.&lt;</span><span class="Identifier">numSearches</span><span class="Punctuation">:</span>
  <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">rand</span><span class="Punctuation">(</span><span class="DecNumber">100_000</span><span class="Punctuation">)</span> <span class="Operator">/</span> <span class="DecNumber">1000</span>
  <span class="Identifier">y</span> <span class="Operator">=</span> <span class="Identifier">rand</span><span class="Punctuation">(</span><span class="DecNumber">100_000</span><span class="Punctuation">)</span> <span class="Operator">/</span> <span class="DecNumber">1000</span>
  <span class="Keyword">let</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">values</span><span class="Punctuation">,</span> <span class="Identifier">dist</span><span class="Punctuation">)</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">nearestNieghbour</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">)</span>

<span class="Comment"># Perform nearestNeighours searches</span>
<span class="Keyword">let</span> <span class="Identifier">n</span> <span class="Operator">=</span> <span class="DecNumber">10</span>
<span class="Keyword">for</span> <span class="Identifier">a</span> <span class="Keyword">in</span> <span class="FloatNumber">0.</span><span class="Operator">.&lt;</span><span class="Identifier">numSearches</span><span class="Punctuation">:</span>
  <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">rand</span><span class="Punctuation">(</span><span class="DecNumber">100_000</span><span class="Punctuation">)</span> <span class="Operator">/</span> <span class="DecNumber">1000</span>
  <span class="Identifier">y</span> <span class="Operator">=</span> <span class="Identifier">rand</span><span class="Punctuation">(</span><span class="DecNumber">100_000</span><span class="Punctuation">)</span> <span class="Operator">/</span> <span class="DecNumber">1000</span>
  <span class="Keyword">let</span> <span class="Identifier">ret</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">nearestNieghbours</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Identifier">n</span><span class="Punctuation">)</span>
  <span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">,</span> <span class="Identifier">dist</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">ret</span><span class="Punctuation">:</span>
    <span class="Identifier">echo</span> <span class="RawData">fmt&quot;point={pt}, value={value}, dist={dist}&quot;</span>

<span class="Comment"># Perform withinRadius searches</span>
<span class="Keyword">var</span> <span class="Identifier">ret2</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">withinRadius</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">point</span><span class="Operator">.</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">point</span><span class="Operator">.</span><span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Identifier">radius</span><span class="Operator">=</span><span class="FloatNumber">5.0</span><span class="Punctuation">,</span> <span class="Identifier">squaredDist</span><span class="Operator">=</span><span class="Identifier">false</span><span class="Punctuation">,</span> <span class="Identifier">sortResults</span><span class="Operator">=</span><span class="Identifier">true</span><span class="Punctuation">)</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">,</span> <span class="Identifier">dist</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">ret2</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="RawData">fmt&quot;point={pt}, value={value}, dist={dist}&quot;</span>

<span class="Comment"># Perform withinRange searches</span>
<span class="Keyword">var</span>
  <span class="Identifier">min</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="Identifier">float</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="FloatNumber">0.0</span><span class="Punctuation">,</span> <span class="FloatNumber">0.0</span><span class="Punctuation">]</span>
  <span class="Identifier">max</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="Identifier">float</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="FloatNumber">100.0</span><span class="Punctuation">,</span> <span class="FloatNumber">100.0</span><span class="Punctuation">]</span>
  <span class="Identifier">hyperRect</span> <span class="Operator">=</span> <span class="Identifier">newHyperRectangle</span><span class="Punctuation">(</span><span class="Identifier">min</span><span class="Punctuation">,</span> <span class="Identifier">max</span><span class="Punctuation">)</span>

<span class="Keyword">var</span> <span class="Identifier">ret</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">withinRange</span><span class="Punctuation">(</span><span class="Identifier">hyperRect</span><span class="Punctuation">)</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">ret</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="RawData">fmt&quot;point={pt}, value={value}&quot;</span></pre></p>
  <div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="KdPoint"></a>
<dt><pre><a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a> <span class="Other">=</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">float</span><span class="Other">]</span></pre></dt>
<dd>

A KdPoint is a location in K-dimensional space.

</dd>
<a id="KdTree"></a>
<dt><pre><a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">root</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">KdNode</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span>
  <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span>
</pre></dt>
<dd>

A k-d tree data structure that allows efficient spatial querying on point distributions. The Current implementation is designed for 2-D point data, although other dimensionality is possible simply by modifying the const <tt class="docutils literal"><span class="pre">K</span></tt>.

</dd>
<a id="HyperRectangle"></a>
<dt><pre><a href="kdtree.html#HyperRectangle"><span class="Identifier">HyperRectangle</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">min</span><span class="Operator">*</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a>
  <span class="Identifier">max</span><span class="Operator">*</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a>
</pre></dt>
<dd>

A HyperRectangle is used by the withinRange search function to identify multi-deminsional ranges.

</dd>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#10">Consts</a></h1>
<dl class="item">
<a id="K"></a>
<dt><pre><a href="kdtree.html#K"><span class="Identifier">K</span></a> <span class="Other">=</span> <span class="DecNumber">2</span></pre></dt>
<dd>

K is the dimensionality of the points in this package's K-D trees.

</dd>

</dl></div>
<div class="section" id="13">
<h1><a class="toc-backref" href="#13">Funcs</a></h1>
<dl class="item">
<a id="newKdTree,openArray[KdPoint],openArray[T]"></a>
<dt><pre><span class="Keyword">func</span> <a href="#newKdTree%2CopenArray%5BKdPoint%5D%2CopenArray%5BT%5D"><span class="Identifier">newKdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">points</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
<dd>

Constructs a k-d tree with a bulk-loading of points and associated data values of type <tt class="docutils literal"><span class="pre">T</span></tt>. Notice that this should be the preferred way of constructing a KdTree because the resulting tree will be balanced, which will make for more efficient search operations.

</dd>
<a id="add,KdTree[T],KdPoint,T"></a>
<dt><pre><span class="Keyword">func</span> <a href="#add%2CKdTree%5BT%5D%2CKdPoint%2CT"><span class="Identifier">add</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">point</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">;</span> <span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span></pre></dt>
<dd>

This function can be used to add single points, and their associated data of type <tt class="docutils literal"><span class="pre">T</span></tt> to an existing KdTree object. Notice that this can result in an unbalanced tree which is suboptimal for search operation efficiency. 

</dd>
<a id="len,KdTree[T]"></a>
<dt><pre><span class="Keyword">func</span> <a href="#len%2CKdTree%5BT%5D"><span class="Identifier">len</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>

Returns the number of nodes contained within the KdTree.

</dd>
<a id="height,KdTree[T]"></a>
<dt><pre><span class="Keyword">func</span> <a href="#height%2CKdTree%5BT%5D"><span class="Identifier">height</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>

Returns the height of the KdTree.

</dd>
<a id="isBalanced,KdTree[T]"></a>
<dt><pre><span class="Keyword">func</span> <a href="#isBalanced%2CKdTree%5BT%5D"><span class="Identifier">isBalanced</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>

Returns the value of the left tree height - right tree height. The larger the value magnitude, the more unbalanced the tree is (some say an unbalanced tree is any with an absolute magnitude greater than 1). The sign indicates the direction of skew, with negative values indicating a left-skewed tree and positive values indicated a right-skewed tree.

</dd>
<a id="rebalance,KdTree[T]"></a>
<dt><pre><span class="Keyword">func</span> <a href="#rebalance%2CKdTree%5BT%5D"><span class="Identifier">rebalance</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Re-balances an unbalanced KdTree. Note that the original tree structure can be complete modified by this function. Use this function after adding a significant number of individual nodes to the tree with the <tt class="docutils literal"><span class="pre">add</span></tt> function.

</dd>
<a id="nearestNieghbour,KdTree[T],KdPoint"></a>
<dt><pre><span class="Keyword">func</span> <a href="#nearestNieghbour%2CKdTree%5BT%5D%2CKdPoint"><span class="Identifier">nearestNieghbour</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">point</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">;</span> <span class="Identifier">squaredDist</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span>
    <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">,</span> <span class="Identifier">float</span><span class="Other">)</span></pre></dt>
<dd>

Returns the nearest neighbour of an input target point, the data associated with the nearest neighbour, and the distance between the target point and the nearest neighbour. Internally, inter-point distances are calculated as squared-distances. These are rooted in the return values, which decreases efficency, unless the squaredDist parameter is set to true.<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="FloatNumber">100.0</span>
<span class="Keyword">let</span> <span class="Identifier">y</span> <span class="Operator">=</span> <span class="FloatNumber">25.0</span>
<span class="Keyword">let</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">values</span><span class="Punctuation">,</span> <span class="Identifier">dist</span><span class="Punctuation">)</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">nearestNieghbour</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Identifier">squaredDist</span><span class="Operator">=</span><span class="Identifier">false</span><span class="Punctuation">)</span></pre>

</dd>
<a id="nearestNieghbours,KdTree[T],KdPoint,int"></a>
<dt><pre><span class="Keyword">func</span> <a href="#nearestNieghbours%2CKdTree%5BT%5D%2CKdPoint%2Cint"><span class="Identifier">nearestNieghbours</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">point</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">;</span> <span class="Identifier">numNeighbours</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span>
                         <span class="Identifier">squaredDist</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Other">(</span><a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">,</span> <span class="Identifier">float</span><span class="Other">)</span><span class="Other">]</span></pre></dt>
<dd>

Returns a specified number (<tt class="docutils literal"><span class="pre">numNeighbours</span></tt>) of nearest neighbours of a target point (<tt class="docutils literal"><span class="pre">point</span></tt>). Each return point is accompanied by the associated data, and the distance between the target and return points. Internally, inter-point distances are calculated as squared-distances. These are rooted in the return values, which decreases efficency, unless the squaredDist parameter is set to true.<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="FloatNumber">100.0</span>
<span class="Keyword">let</span> <span class="Identifier">y</span> <span class="Operator">=</span> <span class="FloatNumber">25.0</span>
<span class="Keyword">let</span> <span class="Identifier">ret</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">nearestNieghbours</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="DecNumber">5</span><span class="Punctuation">,</span> <span class="Identifier">squaredDist</span><span class="Operator">=</span><span class="Identifier">false</span><span class="Punctuation">)</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">,</span> <span class="Identifier">dist</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">ret</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="RawData">fmt&quot;point={pt}, value={values}, dist={dist}&quot;</span></pre>

</dd>
<a id="withinRadius,KdTree[T],KdPoint,float"></a>
<dt><pre><span class="Keyword">func</span> <a href="#withinRadius%2CKdTree%5BT%5D%2CKdPoint%2Cfloat"><span class="Identifier">withinRadius</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">point</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">;</span> <span class="Identifier">radius</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span>
                    <span class="Identifier">squaredDist</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">sortResults</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Other">(</span><a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">,</span> <span class="Identifier">float</span><span class="Other">)</span><span class="Other">]</span></pre></dt>
<dd>

Returns all of the points contained in the tree that are within a specified radius of a target point. By default, the returned points are in an arbitrary order, unless the <tt class="docutils literal"><span class="pre">sortResults</span></tt> parameter is set to true, in which case the return points will be sorted from nearest to farthest from the target.<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="FloatNumber">100.0</span>
<span class="Keyword">let</span> <span class="Identifier">y</span> <span class="Operator">=</span> <span class="FloatNumber">25.0</span>
<span class="Keyword">var</span> <span class="Identifier">ret2</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">withinRadius</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Identifier">radius</span><span class="Operator">=</span><span class="FloatNumber">5.0</span><span class="Punctuation">,</span> <span class="Identifier">squaredDist</span><span class="Operator">=</span><span class="Identifier">false</span><span class="Punctuation">,</span> <span class="Identifier">sortResults</span><span class="Operator">=</span><span class="Identifier">true</span><span class="Punctuation">)</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">,</span> <span class="Identifier">dist</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">ret2</span><span class="Punctuation">:</span>
   <span class="Identifier">echo</span> <span class="RawData">fmt&quot;point={pt}, value={value}, dist={dist}&quot;</span></pre>

</dd>
<a id="newHyperRectangle,KdPoint,KdPoint"></a>
<dt><pre><span class="Keyword">func</span> <a href="#newHyperRectangle%2CKdPoint%2CKdPoint"><span class="Identifier">newHyperRectangle</span></a><span class="Other">(</span><span class="Identifier">min</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">;</span> <span class="Identifier">max</span><span class="Other">:</span> <a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">)</span><span class="Other">:</span> <a href="kdtree.html#HyperRectangle"><span class="Identifier">HyperRectangle</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Creates a new HyperRectangle

</dd>
<a id="withinRange,KdTree[T],HyperRectangle"></a>
<dt><pre><span class="Keyword">func</span> <a href="#withinRange%2CKdTree%5BT%5D%2CHyperRectangle"><span class="Identifier">withinRange</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="kdtree.html#KdTree"><span class="Identifier">KdTree</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">rectangle</span><span class="Other">:</span> <a href="kdtree.html#HyperRectangle"><span class="Identifier">HyperRectangle</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Other">(</span><a href="kdtree.html#KdPoint"><span class="Identifier">KdPoint</span></a><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">]</span></pre></dt>
<dd>

Returns all of the points contained in the tree that are within a target HyperRectangle.<pre class="listing"><span class="Keyword">var</span>
  <span class="Identifier">min</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="Identifier">float</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="FloatNumber">0.0</span><span class="Punctuation">,</span> <span class="FloatNumber">0.0</span><span class="Punctuation">]</span>
  <span class="Identifier">max</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="Identifier">float</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="FloatNumber">100.0</span><span class="Punctuation">,</span> <span class="FloatNumber">100.0</span><span class="Punctuation">]</span>
  <span class="Identifier">hyperRect</span> <span class="Operator">=</span> <span class="Identifier">newHyperRectangle</span><span class="Punctuation">(</span><span class="Identifier">min</span><span class="Punctuation">,</span> <span class="Identifier">max</span><span class="Punctuation">)</span>

<span class="Keyword">var</span> <span class="Identifier">ret</span> <span class="Operator">=</span> <span class="Identifier">tree</span><span class="Operator">.</span><span class="Identifier">withinRange</span><span class="Punctuation">(</span><span class="Identifier">hyperRect</span><span class="Punctuation">)</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">pt</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">ret</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="RawData">fmt&quot;point={pt}, value={value}&quot;</span></pre>

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2020-04-11 00:19:28 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
