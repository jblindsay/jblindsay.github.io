<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Part 1: Image Histograms - GEOG3420 W23 Lab 2</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="part1.html" class="active"><strong aria-hidden="true">2.</strong> Part 1: Image Histograms</a></li><li class="chapter-item expanded "><a href="part2.html"><strong aria-hidden="true">3.</strong> Part 2: Image Contrast Enhancement</a></li><li class="chapter-item expanded "><a href="part3.html"><strong aria-hidden="true">4.</strong> Part 3: Conversion to Reflectance</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">GEOG3420 W23 Lab 2</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="part-1-image-histograms"><a class="header" href="#part-1-image-histograms">Part 1: Image Histograms</a></h1>
<p>Using QGIS (or ArcGIS if that is your preference), display the Band 2 (blue) image (<code>LC09_L2SP_018030_20220614_20220616_02_T1_SR_B2</code>), contained in the decompressed Lab 2 data folder, which you should have downloaded from the CourseLink site. You should find the the image looks something like the following:</p>
<p><img src="img/band2.png" alt="band2.tif image" /></p>
<p>This is a similar scene as the imagery that we used in Lab 1, however, it has had some extra processing (it is a Landsat 9 Level-2 image data set compared with the Level-1 data that we used in Lab 1). You may notice that overall this image appears to be quite dark and generally has poor contrast. Image contrast describes the degree to which objects or features within an image can be distinguished in relation to other nearby objects within the scene by their varying brightness. When all of the features in an image are similarly dark, or similarly bright, then the image has poor contrast. Image contrast is one of the most important characteristcs determining the usefulness of an image in visual interpretation (by humans) and the image's overall information content. </p>
<p>When an image appears overall dark with poor contrast, as with our Band 2 image, it is the result of a relatively small number of very bright pixels. The majority of pixels occupy relatively dark radiometric positions, i.e, darker greytones, because of these few very bright pixels. This is very often the result of the presence of cloud cover in the image, clouds being highly reflective throughout much of the spectrum used in Earth observation. However, this is not the case for our scene. If you recall from Lab 1, this scene had relatively little cloud cover. Furthermore, the processing used to generate this Landsat 9 Level-2 image removed much of the cloud cover that we saw in Lab 1. And yet this image still contains some pixels that are much brighter.</p>
<blockquote>
<p>1.1. Inspect the image closely. What broadly defined land-cover type is associated with the very brightest pixels in this scene? Here, adding an OpenStreetMap layer can be helpful in your interpretation. (1 mark)</p>
</blockquote>
<p>Display the Band 2 image's histogram; in QGIS, you would do this by opening the layer properties, selecting the <em>Histogram</em> tab (on the left), and finally pressing the <em>Compute Histogram</em> button. An image histogram shows the frequency distribution of pixel values. You'll notice that the Band 2 image histogram is bimodal, i.e. that it has two peaks.</p>
<blockquote>
<p>1.2. Why do you think that this image histogram is bimodal? What land-cover types are associated with the two peaks in the histogram? (2 marks)</p>
</blockquote>
<p>Another thing that you'll notice about the Band 2 image histogram is that it doesn't occupy the full <em>dynamic range</em>. The dynamic range is a reference to the range in brightness values and is related to the radiometric resolution, or bit-depth of the sensor. In the case of Landsat 9, the OLI-2 sensor has a 14-bit radiometric resolution, meaning that it is capable of producing images with 16384 different greytones. Using the script below (<strong>being sure to modify it to reflect the appropriate floating license ID, in both places, and your working directory containing the lab data</strong>) apply the Whitebox Workflows <code>raster_summary</code> function to calculate the minimum, maximum, and average digital numbers (DNs) in each of the seven bands of imagery associated with the scene.</p>
<p><em>raster_summary.py</em></p>
<pre><code class="language-python">import os
import whitebox_workflows

wbe = whitebox_workflows.WbEnvironment('floating-license-ID')  # Initialize Whitebox

try:
    # declare your working directory as a variable
    wbe.working_directory = &quot;/path/to/lab/data&quot; # BE SURE TO UPDATE THIS
    assert(os.path.isdir(wbe.working_directory)) # Check to make sure that your workign directory is a valid directory

    wbe.verbose = False # We don't need constant progress updates for every other tool though

    base_file_name = &quot;LC09_L2SP_018030_20220614_20220616_02_T1_&quot;

    # We'll transform the first 7 bands of the data set
    for band in range(7): # range counts up to, but not including, the value
        # The bands are indexed 1, 2, 3... but the mult_term list is indexed 0, 1, 2...
        band_num = band + 1
        print(f&quot;\nRaster summary for band {band_num}...&quot;)

        image_file = f&quot;{base_file_name}SR_B{band_num}.tif&quot; # The name of this file
        band_data = wbe.read_raster(image_file) # Read the file into memory

        print(wbe.raster_summary_stats(band_data))

    # Provide some indication that the job is done.
    print(&quot;Operation complete!&quot;)

except Exception as e:
    print(f&quot;Exception: {e}&quot;)

finally:
    print(wbe.check_in_license(&quot;floating-license-ID&quot;))
</code></pre>
<blockquote>
<p>1.3. What are the minimum, maximum, and average DNs for each of the bands of imagery? (7 marks)</p>
<p>1.4. Is the average DN nearer the minimum or the maximum for each of the bands? What does this imply in terms of the contrast of thee iamges? (2 marks)</p>
</blockquote>
<p>In reality, the minimum and maximum pixel values occupy the extremes of the frequency distribution and there are relatively few cells in these regions of the histograms. This is an important thing to remember for the next section of this lab on contrast enhancements.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="intro.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="part2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="intro.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="part2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
