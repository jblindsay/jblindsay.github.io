<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Part 2: Multispectral Imagery Data - GEOG2420 F25 Lab 1</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="part1.html"><strong aria-hidden="true">2.</strong> Part 1: Acquiring Satellite Imagery</a></li><li class="chapter-item expanded "><a href="part2.html" class="active"><strong aria-hidden="true">3.</strong> Part 2: Multispectral Imagery Data</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GEOG2420 F25 Lab 1</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="part-2-visualizing-landsat-imagery-in-qgis"><a class="header" href="#part-2-visualizing-landsat-imagery-in-qgis">Part 2: Visualizing Landsat Imagery in QGIS</a></h1>
<p>Open QGIS and start a new project. Before doing anything, save your project to the folder you set up for this lab (the same folder where you're storing the images you downloaded above).</p>
<p>We are going to display the Landsat image you downloaded as a series of red-green-blue (RGB) composites. An RGB colour composite is simply a combination of three spectral bands assigned to the red, green and blue channels of your computer's display. To display an RGB composite, QGIS requires that the bands are stored together in a single file, i.e. as a multi-band raster. When you downloaded the Landsat data, you should have noticed that the spectral bands are all stored as separate files with the sufixes B2.tif, B3.tif, and so on, so this is something we'll have to take care of before we can create our RGB composite. One option could be to combine all the bands we want to use and save this as a new multi-band GeoTIFF file. This is fine, but one disadvantage is that we are essentially just duplicating the data and taking up more disk space in the process.</p>
<p>The <strong>GDAL</strong> (GeoData Abstraction Library) toolbox included in QGIS has an interesting solution to this problem called virtual rasters. A virtual raster is a very small file with information about a raster, but without containing any of the actual raster data itself. Instead, the virtual raster file points to the original data files, and essentially tricks software like QGIS into thinking it is the actual raster. So, we will create a virtual raster using the Landsat data you downloaded to combine the bands into one file,
without actually copying any of the actual data.</p>
<p>Using either the Layer &gt; Add Layer command from the top menu or the file browser on the top-left panel of your screen, add the rasters corresponding to B2, B3, B4 and B5 to your map. Notice that they all open up as separate greyscale image layers in your map. Feel free to switch them off, since we won't be visualizing them separately. Keep them in your layers tab, because this will make it easier to access them in the following steps.</p>
<p>Now that our bands are available in the layers tab, we are ready to create the virtual raster dataset. Open the processing toolbox (if it's not already visible on the right-hand side of your screen, go to Processing &gt; Toolbox and it should appear). Expand the GDAL menu in the toolbox, then open Raster Miscellaneous and double-click on Build virtual raster. Under Input Layers, click on the ... and select all of the four Landsat bands you added to your layers panel. Under Nodata value(s) for input bands... enter 0. Check the box beside the text to place each input file into a separate file. Under Virtual, click the ... and Save to file... and enter a filename (without extension) such as "Landsat9_stack". Make sure you are saving the file to your project directory at this stage. A `.vrt extension will be added automatically by the tool. A few seconds after pressing Run, you should see the message Algorithm 'Build virtual raster' finished, at which point you can click Close. You should now see a new layer called <em>Landsat9_stack</em> in your layers pane.</p>
<p>We can now view the multi-band Landsat image as an RGB composite using this VRT layer. Double-click on the VRT layer in the layers tab and navigate to the Symbology tab so we can assign the appropriate spectral bands to the red, green and blue display channels. We are going to start with a True Colour Composite, in which the red, green and blue display channels are occupied by the actual red, green and
blue spectral bands.</p>
<p>Important: When we created the VRT, the names of the bands were reassigned to be just numbers from 1 to 4. Remember that the bands we are using are 2, 3, 4 and 5. This won't be a big problem in this lab, but this could get confusing if you work with other types of imagery with band names that are not quite as simple!</p>
<p>Finally, we're ready to display our RGB composite! In fact, you should already see some sort of composite image if you view the new VRT layer, but we'll need to work on it for it to make sense. To display an RGB composite using our VRT layer, make sure it is the only layer turned on in your layers pane, i.e., make sure there are no visible layers on top of it. Double-click on the VRT layer and go to the Symbology tab. To create a true-colour composite, assign the red band (Band 4) to the red channel, the green band (Band 3) to the green channel, and the blue band (Band 2) to the blue channel. In Contrast Enhancement, select Stretch to MinMax. Now we will set the minimum and maximum that does the stretch: expand the Min / Max Value Settings section. Select Cumulative count cut and change the values
from their defaults to 1.0 and 99.0%, respectively. Click Apply and then Ok. You should now see a true colour composite, where the colour tones have been stretched according to the overall statistics of each band.</p>
<p>Note: For images that are completely free of any clouds, the MinMax stretch option is usually more appropriate. If the Cumulative Count Cut results in a poorly stretched image, please experiment with some of the other stretch methods, especially the MinMax stretch. Check with your TA if you are unsure.</p>
<blockquote>
<p>Q3.1 Create a simple map showing the result of the colour-stretched image. Your map will simply be the true colour composite using the VRT you created above. You do not need to add any other raster or vector layers. In your map, zoom to the extent of the image (click on
the VRT layer and select "Zoom to Layer"). Also, include a scale bar showing distances in in kilometres, a title, your name and the date. Do not worry about including a grid or legend. Export your map as an image and include it in your report. (3 Marks)</p>
</blockquote>
<blockquote>
<p>Q3.2 Using the same visualization extent as in your previous map, edit the raster symbology to create a false colour composite, assigning the originally named Band 5 (near infrared) to the Red channel, the originally named Band 4 (red) to the green channel, and the
originally named Band 3 (green) to the Blue channel. Remember that these bands were renamed when you created the VRT, so be sure to select the right corresponding VRT bands! Stretch the colours as you did with the true colour composite (Stretch to Min/Max
with a cumulative count cut at 1% and 99%). Export the map as an image and include it in your report. What feature of the landscape is particularly highlighted by the <em>red channel</em> in this false colour composite? Explain why you think this is (Hint: think about
which spectral band is occupying the red channel in this composite). (5 Marks)</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="part1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="part1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
