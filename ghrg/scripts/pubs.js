var citation_data = {
  "WoodrowEtAlJoH": "@article{WoodrowEtAl2016,\n\
  title ={Evaluating DEM conditioning techniques, elevation source data, and grid resolution for field-scale hydrological parameter extraction},\n\
  journal ={Journal of Hydrology},\n\
  volume = {540},\n\
  number = {},\n\
  pages = {1022–-1029},\n\
  year = {2016},\n\
  issn = {0098-3004},\n\
  doi = {http://dx.doi.org/10.1016/j.jhydrol.2016.07.018},\n\
  url = {},\n\
  author = {K. Woodrow, J.B. Lindsay, A.A. Berg},\n\
}",
  "LindsayWhiteboxCandG": "@article{Lindsay2016,\n\
  title ={Whitebox GAT: A case study in geomorphometric analysis},\n\
  journal ={Computers \& Geosciences},\n\
  volume = {95},\n\
  number = {},\n\
  pages = {75--84},\n\
  year = {2016},\n\
  issn = {0098-3004},\n\
  doi = {http://dx.doi.org/10.1016/j.cageo.2016.07.003},\n\
  url = {http://www.sciencedirect.com/science/article/pii/S0098300416301820},\n\
  author = {J.B. Lindsay},\n\
}",
  "LindsayESPL2016": "@article {LindsayESPL2016,\n\
  author = {Lindsay, John B.},\n\
  title = {The practice of {DEM} stream burning revisited},\n\
  journal = {Earth Surface Processes and Landforms},\n\
  volume = {41},\n\
  number = {5},\n\
  doi = {10.1002/esp.3888},\n\
  pages = {658--668},\n\
  year = {2016},\n\
}",
  "BhamjeeEtAlHP2016": "@article {BhamjeeEtAlHP2016,\n\
  author = {Bhamjee, Rashaad and Lindsay, John B. and Cockburn, Jaclyn},\n\
  title={Monitoring ephemeral headwater streams: a paired-sensor approach},\n\
  journal={Hydrological Processes},\n\
  volume=\"30\",\n\
  number=\"6\",\n\
  doi={10.1002/hyp.10XXX},\n\
  pages={888–-898},\n\
  year={2016},\n\
}",
  "LindsayHP2016": "@article {LindsayHP2016,\n\
  author = {Lindsay, John B.},\n\
  title = {Efficient hybrid breaching-filling sink removal methods for flow path enforcement in digital elevation models},\n\
  journal = {Hydrological Processes},\n\
  volume={30},\n\
  number={6},\n\
  doi = {10.1002/hyp.10648},\n\
  pages = {846–-857},\n\
  year = {2016}\n\
}",
  "LindsayEtAlGeomorph2015": "@article{LindsayEtAlGeomorph2015,\n\
  title = {An integral image approach to performing multi-scale topographic position analysis},\n\
  journal = {Geomorphology},\n\
  volume = {245},\n\
  number = {15},\n\
  pages = {51-61},\n\
  year = {2015},\n\
  doi = {10.1016/j.geomorph.2015.05.025},\n\
  author = {J.B. Lindsay and J.M.H. Cockburn and H.A.J. Russell},\n\
}",
  "Molder2015": "@article{Molder2015,\n\
  title={Sediment-assisted nutrient transfer from a small, no-till, tile drained watershed in Southwestern Ontario, Canada},\n\
  journal={Agricultural Water Management},\n\
  volume={152},\n\
  number={},\n\
  pages={31--40},\n\
  year={2015},\n\
  doi={10.1016/j.agwat.2014.12.010},\n\
  author={Bryce Molder and Jaclyn Cockburn and Aaron Berg and John Lindsay and Kathryn Woodrow},\n\
}",
  "LindsayDhun2015": "@article{LindsayDhun2015,\n\
  title = {Modelling surface drainage patterns in altered landscapes using {LiDAR}},\n\
  author = {Lindsay, J.B. and Dhun, K.},\n\
  journal = {International Journal of Geographical Information Science},\n\
  volume = {29},\n\
  number = {3},\n\
  doi = {10.1080/13658816.2014.975715},\n\
  year = {2015},\n\
  pages = {1--15},\n\
}",
  "PeirceLindsay2015": "@article {PeirceLindsay2015,\n\
  author = {Peirce, Sarah E. and Lindsay, John B.},\n\
  title = {Characterizing ephemeral streams in a southern Ontario watershed using electrical resistance sensors},\n\
  journal = {Hydrological Processes},\n\
  volume = {29},\n\
  number = {1},\n\
  doi = {10.1002/hyp.10136},\n\
  pages = {103--111},\n\
  year = {2015},\n\
}",
  "GoulsbraEtAl2014": "@article {GoulsbraEtAl2014,\n\
  author = {Goulsbra, Claire and Evans, Martin and Lindsay, John},\n\
  title = {Temporary streams in a peatland catchment: pattern, timing, and controls on stream network expansion and contraction},\n\
  journal = {Earth Surface Processes and Landforms},\n\
  volume = {39},\n\
  number = {6},\n\
  doi = {10.1002/esp.3533},\n\
  pages = {790--803},\n\
  year = {2014},\n\
}",
  "LindsaySeibert2013": "@article{LindsaySeibert2013,\n\
  title={Measuring the significance of a divide to local drainage patterns},\n\
  author={Lindsay, John B and Seibert, Jan},\n\
  journal={International Journal of Geographical Information Science},\n\
  volume={27},\n\
  number={7},\n\
  pages={1453--1468},\n\
  year={2013},\n\
}",
  "BhamjeeLindsay2011": "@article{BhamjeeLindsay2011,\n\
  title={Ephemeral stream sensor design using state loggers},\n\
  author={Bhamjee, R and Lindsay, JB},\n\
  journal={Hydrology and Earth System Sciences},\n\
  volume={15},\n\
  number={3},\n\
  pages={1009--1021},\n\
  year={2011},\n\
}",
  "Evans2010impact": "@article{evans2010impact,\n\
  title={Impact of gully erosion on carbon sequestration in blanket peatlands},\n\
  author={Evans, Martin and Lindsay, John},\n\
  journal={Climate research (Open Access for articles 4 years old and older)},\n\
  volume={45},\n\
  number={1},\n\
  pages={31--41},\n\
  year={2010}\n\
}",
  "EvansLindsayESPL2010": "@article {EvansLindsayESPL2010,\n\
  author = {Evans, Martin and Lindsay, John},\n\
  title = {High resolution quantification of gully erosion in upland peatlands at the landscape scale},\n\
  journal = {Earth Surface Processes and Landforms},\n\
  volume = {35},\n\
  number = {8},\n\
  doi = {10.1002/esp.1918},\n\
  pages = {876--886},\n\
  year = {2010},\n\
}",
"RothwellEtAl2010": "@article{RothwellEtAl2010,\n\
  title = {Modelling suspended sediment lead concentrations in contaminated peatland catchments using digital terrain analysis},\n\
  journal = {Ecological Engineering},\n\
  volume = {36},\n\
  number = {5},\n\
  pages = {623--630},\n\
  year = {2010},\n\
  doi={http://dx.doi.org/10.1016/j.ecoleng.2008.10.010},\n\
  author = {James J. Rothwell and John B. Lindsay and Martin G. Evans and Timothy E.H. Allott},\n\
}",
"GoulsbraEtAl2009": "@article{GoulsbraEtAl2009,\n\
  title={A new approach to the application of electrical resistance sensors to measuring the onset of ephemeral streamflow in wetland environments},\n\
  author={Goulsbra, CS and Lindsay, JB and Evans, MG},\n\
  journal={Water Resources Research},\n\
  volume={45},\n\
  number={9},\n\
  year={2009},\n\
  pages={n/a--n/a},\n\
}",
"LindsayEvans2008": "@article {LindsayEvans2008,\n\
  author = {Lindsay, John B. and Evans, Martin G.},\n\
  title = {The influence of elevation error on the morphometrics of channel networks extracted from DEMs and the implications for hydrological modelling},\n\
  journal = {Hydrological Processes},\n\
  volume = {22},\n\
  number = {11},\n\
  publisher = {John Wiley & Sons, Ltd.},\n\
  issn = {1099-1085},\n\
  url = {http://dx.doi.org/10.1002/hyp.6728},\n\
  doi = {10.1002/hyp.6728},\n\
  pages = {1588--1603},\n\
  keywords = {drainage network indices, morphometrics, hydrological modelling, error modelling, digital elevation models},\n\
  year = {2008},\n\
}",
"LindsayEtAl2008": "@article {LindsayEtAl2008,\n\
  author = {Lindsay, John B. and Rothwell, James J. and Davies, Helen},\n\
  title = {Mapping outlet points used for watershed delineation onto DEM-derived stream networks},\n\
  journal = {Water Resources Research},\n\
  volume = {44},\n\
  number = {8},\n\
  issn = {1944-7973},\n\
  url = {http://dx.doi.org/10.1029/2007WR006507},\n\
  doi = {10.1029/2007WR006507},\n\
  pages = {n/a--n/a},\n\
  keywords = {Catchment, Watershed, Hydrology: Geographic Information Systems (GIS), watersheds, river basins, catchments, digital elevation models, stream networks, automated techniques},\n\
  year = {2008},\n\
  note = {W08442},\n\
}",
"RothwellLindsay2008": "@article{RothwellLindsay2008,\n\
  title = {Mapping contemporary magnetic mineral concentrations in peat soils using fine-resolution digital terrain data },\n\
  journal = {CATENA},\n\
  volume = {70},\n\
  number = {3},\n\
  pages = {465--474},\n\
  year = {2007},\n\
  issn = {0341-8162},\n\
  doi = {http://dx.doi.org/10.1016/j.catena.2006.12.001},\n\
  author = {J.J. Rothwell and J.B. Lindsay},\n\
  keywords = {Magnetic susceptibility},\n\
  keywords = {Digital Elevation Model},\n\
  keywords = {Topography},\n\
  keywords = {Gullies},\n\
  keywords = {Peak District National Park},\n\
}",
"Rothwell2007111": "@article{Rothwell2007111,\n\
  title = {Scale-dependent spatial variability in peatland lead pollution in the southern Pennines, {U}{K}}|,\n\
  journal = {Environmental Pollution},\n\
  volume = {145},\n\
  number = {1},\n\
  pages = {111--120},\n\
  year = {2007},\n\
  issn = {0269-7491},\n\
  doi = {http://dx.doi.org/10.1016/j.envpol.2006.03.037},\n\
  author = {James J. Rothwell and Martin G. Evans and John B. Lindsay and Timothy E.H. Allott},\n\
  keywords = {Peat},\n\
  keywords = {Lead pollution},\n\
  keywords = {Inventory},\n\
  keywords = {Spatial variability},\n\
  keywords = {Stochastic simulation},\n\
}",
"Lindsay2006": "@article{Lindsay2006,\n\
  author = { Lindsay, John B. },\n\
  title = {Sensitivity of channel mapping techniques to uncertainty in digital elevation data},\n\
  journal = {International Journal of Geographical Information Science},\n\
  volume = {20},\n\
  number = {6},\n\
  pages = {669--692},\n\
  year = {2006},\n\
  doi = {10.1080/13658810600661433},\n\
}",
"LindsayCreed2006": "@article{Lindsay20061192,\n\
  title = {Distinguishing actual and artefact depressions in digital elevation data},\n\
  journal = {Computers & Geosciences},\n\
  volume = {32},\n\
  number = {8},\n\
  pages = {1192--1204},\n\
  year = {2006},\n\
  note = {Spatial Modeling for Environmental and Hazard ManagementSpatial Modeling for Environmental and Hazard Management},\n\
  issn = {0098-3004},\n\
  doi = {http://dx.doi.org/10.1016/j.cageo.2005.11.002},\n\
  author = {John B. Lindsay and Irena F. Creed},\n\
  keywords = {Topographic depressions},\n\
  keywords = {Digital elevation models},\n\
  keywords = {Digital terrain analysis},\n\
  keywords = {Topography},\n\
}",
"LindsayCreed2005HP": "@article {LindsayCreed2005HP,\n\
  author = {Lindsay, John B. and Creed, Irena F.},\n\
  title = {Removal of artifact depressions from digital elevation models: towards a minimum impact approach},\n\
  journal = {Hydrological Processes},\n\
  volume = {19},\n\
  number = {16},\n\
  publisher = {John Wiley & Sons, Ltd.},\n\
  issn = {1099-1085},\n\
  url = {http://dx.doi.org/10.1002/hyp.5835},\n\
  doi = {10.1002/hyp.5835},\n\
  pages = {3113--3126},\n\
  keywords = {digital elevation models, terrain analysis, depression, error, preprocessing, flow routing, channel network extraction},\n\
  year = {2005},\n\
}",
"LindsayCreed2005PERS": "@article {LindsayCreed2005PERS,\n\
  author = {Lindsay, John B. and Creed, Irena F.},\n\
  title = {Sensitivity of Digital Landscapes to Artifact Depressions in Remotely-sensed DEMs},\n\
  journal = {Photogrammetric Engineering & Remote Sensing},\n\
  volume = {71},\n\
  number = {9},\n\
  year = {2005-09-01T00:00:00},\n\
  pages = {1029-1036},\n\
  url = {http://www.ingentaconnect.com/content/asprs/pers/2005/00000071/00000009/art00001},\n\
  doi = {doi:10.14358/PERS.71.9.1029}\n\
}",
"Lindsay2005": "@article {Lindsay2005,\n\
  author = {Lindsay, John B.},\n\
  title = {The Terrain Analysis System: a tool for hydro-geomorphic applications},\n\
  journal = {Hydrological Processes},\n\
  volume = {19},\n\
  number = {5},\n\
  publisher = {John Wiley & Sons, Ltd.},\n\
  issn = {1099-1085},\n\
  url = {http://dx.doi.org/10.1002/hyp.5818},\n\
  doi = {10.1002/hyp.5818},\n\
  pages = {1123--1130},\n\
  year = {2005},\n\
}",
"Lindsay2004WRR": "@article{lindsay2004drainage,\n\
  title={Drainage basin morphometrics for depressional landscapes},\n\
  author={Lindsay, John B and Creed, Irena F and Beall, Frederick D},\n\
  journal={Water Resources Research},\n\
  volume={40},\n\
  number={9},\n\
  year={2004},\n\
  pages={n/a--n/a},\n\
  publisher={Wiley Online Library}\n\
}",
"Lindsay2003WRR": "@article {Lindsay2003WRR,\n\
  author = {Lindsay, John B.},\n\
  title = {A physically based model for calculating contributing area on hillslopes and along valley bottoms},\n\
  journal = {Water Resources Research},\n\
  volume = {39},\n\
  number = {12},\n\
  issn = {1944-7973},\n\
  url = {http://dx.doi.org/10.1029/2003WR002576},\n\
  doi = {10.1029/2003WR002576},\n\
  pages = {n/a--n/a},\n\
  keywords = {Hydrology: Geomorphology, Hydrology: Networks, Hydrology: Runoff and streamflow, Hydrology: Instruments and techniques, flow routing, contributing area, digital elevation models, stream network extraction, channel initiation},\n\
  year = {2003},\n\
  note = {1332},\n\
}",
"LindsayEtAl2002": "@article{LindsayEtAl2002,\n\
  title={Using complex permittivity and artificial neural networks for contaminant prediction},\n\
  author={Lindsay, John B and Shang, Julie Q and Rowe, R Kerry},\n\
  journal={Journal of environmental engineering},\n\
  volume={128},\n\
  number={8},\n\
  pages={740--747},\n\
  year={2002},\n\
  publisher={American Society of Civil Engineers}\n\
}",
"LindsayAshmore2002": "@article {LindsayAshmore2002,\n\
  author = {Lindsay, John B. and Ashmore, Peter E.},\n\
  title = {The effects of survey frequency on estimates of scour and fill in a braided river model},\n\
  journal = {Earth Surface Processes and Landforms},\n\
  volume = {27},\n\
  number = {1},\n\
  publisher = {John Wiley & Sons, Ltd.},\n\
  issn = {1096-9837},\n\
  url = {http://dx.doi.org/10.1002/esp.282},\n\
  doi = {10.1002/esp.282},\n\
  pages = {27--43},\n\
  keywords = {scour and fill, measurement bias, survey frequency, morphological methods, bed load sediment transport},\n\
  year = {2002},\n\
}",
"lindsay_modelling_2008": "@incollection{lindsay_modelling_2008,\n\
  address = {Berlin, Heidelberg},\n\
  title = {Modelling channelling and deflection of wind by topography},\n\
  booktitle = {Advances in {Digital} {Terrain} {Analysis}},\n\
  publisher = {Springer},\n\
  author = {Lindsay, J.B. and Rothwell, J.J.},\n\
  editor = {Zhou, Q. and Lees, B. and Tang, G.},\n\
  year = {2008},\n\
  pages = {383--405}\n\
}",
"lindsay2008TAS": "@incollection{lindsay2008TAS,\n\
  title={Geomorphometry in {T}{A}{S} {G}{I}{S}},\n\
  author={Lindsay, John B},\n\
  editor={Hengl, T. and Reuter, H.I.},\n\
  booktitle={Geomorphometry: Concepts, Software, Applications},\n\
  publisher={Elsevier},\n\
  address={Amsterdam},\n\
  year={2008},\n\
  volume={33},\n\
  pages={367--386},\n\
  bookseries={Developments in Soil Science}\n\
}",
"lindsay2014whitebox": "@inproceedings{lindsay2014whitebox,\n\
  address = {Glasgow, UK},\n\
  title={The {Whitebox} {Geospatial} {Analysis} {Tools} project and open-access {GIS}},\n\
  author={Lindsay, JB},\n\
  booktitle={Proceedings of the GIS research UK 22nd annual conference},\n\
  pages={16--18},\n\
  month = apr,\n\
  year={2014}\n\
}"
};

var citeButtonLabel = "Cite"; //"BibTeX Citation"

function getCiteButtonLabel() {
  return citeButtonLabel;
}

function showCitation(pub_id) {
  var pub_id_btn = pub_id + "Btn"
  if (document.getElementById(pub_id_btn).innerHTML == citeButtonLabel) {
    numLines = citation_data[pub_id].split(/\r\n|\r|\n/).length
    s = " <button class=\"submitButton\" type=\"button\" onclick=\"copyTextArea('" + pub_id + "');\" id=\"" + pub_id + "CopyBtn\">Copy BibTeX</button>\
    <textarea id=\"" + pub_id + "TextArea\" rows=\"" + numLines + "\" cols=\"85\">" + citation_data[pub_id] + "</textarea>";
    document.getElementById(pub_id).innerHTML += s;
    document.getElementById(pub_id_btn).innerHTML = "Hide Citation";
  } else {
    hideTextArea(pub_id);
  }
  return false; //generateReturnPage;
}

function remove(id) {
  return (elem=document.getElementById(id)).parentNode.removeChild(elem);
}

function hideTextArea(pub_id) {
  remove(pub_id + "TextArea");
  remove(pub_id + "CopyBtn");
  document.getElementById(pub_id + "Btn").innerHTML = citeButtonLabel;
}

function copyTextArea(pub_id) {
  var field = document.getElementById(pub_id + "TextArea");
  field.select();
  try {
    copysuccess = document.execCommand("copy"); // run command to copy selected text to clipboard
  } catch(e) {
    alert("Failed to copy");
  }
}

function insertCitations() {
  for (var key in citation_data) {
    var el = document.getElementById(key);
    if (el != null) {
      s = " <button class=\"submitButton\" type=\"button\" onclick=\"showCitation('" + key +
          "');\" title=\"BibTeX Citation\" id=\"" + key + "Btn\">Cite</button>";
      el.innerHTML += s;
    }
  }
}

insertCitations();
