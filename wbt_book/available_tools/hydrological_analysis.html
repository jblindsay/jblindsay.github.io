<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hydrological analysis - WhiteboxTools User Manual</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="../preface.html">Preface</a></li><li><a href="../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><a href="../install.html"><strong aria-hidden="true">2.</strong> Setting Up WhiteboxTools</a></li><li><a href="../using_whiteboxtools.html"><strong aria-hidden="true">3.</strong> Using WhiteboxTools</a></li><li><ol class="section"><li><a href="../python_scripting/scripting.html"><strong aria-hidden="true">3.1.</strong> Interfacing with Python</a></li><li><ol class="section"><li><a href="../python_scripting/using_whitebox_tools.html"><strong aria-hidden="true">3.1.1.</strong> Using whitebox_tools.py</a></li><li><a href="../python_scripting/tool_output.html"><strong aria-hidden="true">3.1.2.</strong> Handling tool output</a></li><li><a href="../python_scripting/additional_functions.html"><strong aria-hidden="true">3.1.3.</strong> Additional functions</a></li><li><a href="../python_scripting/example.html"><strong aria-hidden="true">3.1.4.</strong> An example Python project</a></li></ol></li><li><a href="../r_interface.html"><strong aria-hidden="true">3.2.</strong> Interfacing with R</a></li><li><a href="../whitebox_tools_runner.html"><strong aria-hidden="true">3.3.</strong> WhiteboxTools Runner</a></li><li><a href="../qgis_plugin.html"><strong aria-hidden="true">3.4.</strong> QGIS plugin</a></li><li><a href="../arcgis_plugin.html"><strong aria-hidden="true">3.5.</strong> ArcGIS plugin</a></li><li><a href="../command_prompt.html"><strong aria-hidden="true">3.6.</strong> Command-line interface</a></li></ol></li><li><a href="../available_tools/index.html"><strong aria-hidden="true">4.</strong> Tools Reference</a></li><li><ol class="section"><li><a href="../available_tools/data_tools.html"><strong aria-hidden="true">4.1.</strong> Data tools</a></li><li><a href="../available_tools/geomorphometric_analysis.html"><strong aria-hidden="true">4.2.</strong> Geomorphometric analysis</a></li><li><a href="../available_tools/gis_analysis.html"><strong aria-hidden="true">4.3.</strong> GIS analysis</a></li><li><ol class="section"><li><a href="../available_tools/gis_analysis_distance_tools.html"><strong aria-hidden="true">4.3.1.</strong> Distance tools</a></li><li><a href="../available_tools/gis_analysis_overlay_tools.html"><strong aria-hidden="true">4.3.2.</strong> Overlay tools</a></li><li><a href="../available_tools/gis_analysis_patch_shape_tools.html"><strong aria-hidden="true">4.3.3.</strong> Patch shape tools</a></li></ol></li><li><a href="../available_tools/hydrological_analysis.html" class="active"><strong aria-hidden="true">4.4.</strong> Hydrological analysis</a></li><li><a href="../available_tools/image_processing_tools.html"><strong aria-hidden="true">4.5.</strong> Image processing tools</a></li><li><ol class="section"><li><a href="../available_tools/image_processing_tools_filters.html"><strong aria-hidden="true">4.5.1.</strong> Filters</a></li><li><a href="../available_tools/image_processing_tools_image_enhancement.html"><strong aria-hidden="true">4.5.2.</strong> Image enchancement</a></li></ol></li><li><a href="../available_tools/lidar_tools.html"><strong aria-hidden="true">4.6.</strong> LiDAR tools</a></li><li><a href="../available_tools/mathand_stats_tools.html"><strong aria-hidden="true">4.7.</strong> Mathematical and statistical analysis</a></li><li><a href="../available_tools/stream_network_analysis.html"><strong aria-hidden="true">4.8.</strong> Stream network analysis</a></li></ol></li><li><a href="../tutorials/index.html"><strong aria-hidden="true">5.</strong> Tutorials</a></li><li><ol class="section"><li><a href="../tutorials/mosaic.html"><strong aria-hidden="true">5.1.</strong> How can I mosaic hundreds of rasters?</a></li><li><a href="../tutorials/lidar.html"><strong aria-hidden="true">5.2.</strong> Processing LiDAR data</a></li></ol></li><li><a href="../supported_formats.html"><strong aria-hidden="true">6.</strong> Supported Data Formats</a></li><li><a href="../contributing.html"><strong aria-hidden="true">7.</strong> Contributing and Reporting Bugs</a></li><li><a href="../limitations.html"><strong aria-hidden="true">8.</strong> Limitations</a></li><li><a href="../license.html"><strong aria-hidden="true">9.</strong> License</a></li><li><a href="../faq.html"><strong aria-hidden="true">10.</strong> Frequently Asked Questions</a></li><li><a href="../tool_index.html"><strong aria-hidden="true">11.</strong> Tool Index</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">WhiteboxTools User Manual</h1> 

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#hydrological-analysis" id="hydrological-analysis"><h1>Hydrological Analysis</h1></a>
<ul>
<li><a href="#AverageFlowpathSlope">AverageFlowpathSlope</a></li>
<li><a href="#AverageUpslopeFlowpathLength">AverageUpslopeFlowpathLength</a></li>
<li><a href="#Basins">Basins</a></li>
<li><a href="#BreachDepressions">BreachDepressions</a></li>
<li><a href="#BreachSingleCellPits">BreachSingleCellPits</a></li>
<li><a href="#D8FlowAccumulation">D8FlowAccumulation</a></li>
<li><a href="#D8MassFlux">D8MassFlux</a></li>
<li><a href="#D8Pointer">D8Pointer</a></li>
<li><a href="#DInfFlowAccumulation">DInfFlowAccumulation</a></li>
<li><a href="#DInfMassFlux">DInfMassFlux</a></li>
<li><a href="#DInfPointer">DInfPointer</a></li>
<li><a href="#DepthInSink">DepthInSink</a></li>
<li><a href="#DownslopeDistanceToStream">DownslopeDistanceToStream</a></li>
<li><a href="#DownslopeFlowpathLength">DownslopeFlowpathLength</a></li>
<li><a href="#ElevationAboveStream">ElevationAboveStream</a></li>
<li><a href="#ElevationAboveStreamEuclidean">ElevationAboveStreamEuclidean</a></li>
<li><a href="#Fd8FlowAccumulation">Fd8FlowAccumulation</a></li>
<li><a href="#Fd8Pointer">Fd8Pointer</a></li>
<li><a href="#FillBurn">FillBurn</a></li>
<li><a href="#FillDepressions">FillDepressions</a></li>
<li><a href="#FillSingleCellPits">FillSingleCellPits</a></li>
<li><a href="#FindNoFlowCells">FindNoFlowCells</a></li>
<li><a href="#FindParallelFlow">FindParallelFlow</a></li>
<li><a href="#FlattenLakes">FlattenLakes</a></li>
<li><a href="#FloodOrder">FloodOrder</a></li>
<li><a href="#FlowAccumulationFullWorkflow">FlowAccumulationFullWorkflow</a></li>
<li><a href="#FlowLengthDiff">FlowLengthDiff</a></li>
<li><a href="#Hillslopes">Hillslopes</a></li>
<li><a href="#ImpoundmentSizeIndex">ImpoundmentSizeIndex</a></li>
<li><a href="#Isobasins">Isobasins</a></li>
<li><a href="#JensonSnapPourPoints">JensonSnapPourPoints</a></li>
<li><a href="#LongestFlowpath">LongestFlowpath</a></li>
<li><a href="#MaxUpslopeFlowpathLength">MaxUpslopeFlowpathLength</a></li>
<li><a href="#NumInflowingNeighbours">NumInflowingNeighbours</a></li>
<li><a href="#RaiseWalls">RaiseWalls</a></li>
<li><a href="#Rho8Pointer">Rho8Pointer</a></li>
<li><a href="#Sink">Sink</a></li>
<li><a href="#SnapPourPoints">SnapPourPoints</a></li>
<li><a href="#StochasticDepressionAnalysis">StochasticDepressionAnalysis</a></li>
<li><a href="#StrahlerOrderBasins">StrahlerOrderBasins</a></li>
<li><a href="#Subbasins">Subbasins</a></li>
<li><a href="#TraceDownslopeFlowpaths">TraceDownslopeFlowpaths</a></li>
<li><a href="#UnnestBasins">UnnestBasins</a></li>
<li><a href="#Watershed">Watershed</a></li>
</ul>
<p><a name="AverageFlowpathSlope"></a></p>
<a class="header" href="#averageflowpathslope" id="averageflowpathslope"><h1>AverageFlowpathSlope</h1></a>
<p>This tool calculates the average slope gradient (i.e. slope steepness in degrees) of the flowpaths that
pass through each grid cell in an input digital elevation model (DEM). The user must specify the name of
a DEM raster (<code>--dem</code>). It is important that this DEM is pre-processed to remove all topographic depressions and
flat areas using a tool such as <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>. Several intermediate rasters are created and stored in
memory during the operation of this tool, which may limit the size of DEM that can be processed, depending
on available system resources.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#averageupslopeflowpathlength"><strong>AverageUpslopeFlowpathLength</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.average_flowpath_slope(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=AverageFlowpathSlope -v ^
--wd=&quot;/path/to/data/&quot; -i=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/average_flowpath_slope.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 22/07/2017</p>
<p><a name="AverageUpslopeFlowpathLength"></a></p>
<a class="header" href="#averageupslopeflowpathlength" id="averageupslopeflowpathlength"><h1>AverageUpslopeFlowpathLength</h1></a>
<p>This tool calculates the average length of the flowpaths that run through each grid cell (in map horizontal units)
in in an input digital elevation model (DEM). The user must specify the name of
a DEM raster (<code>--dem</code>). It is important that this DEM is pre-processed to remove all topographic depressions and
flat areas using a tool such as <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>. Several intermediate rasters are created and stored in
memory during the operation of this tool, which may limit the size of DEM that can be processed, depending
on available system resources.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#averageflowpathslope"><strong>AverageFlowpathSlope</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.average_upslope_flowpath_length(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=AverageUpslopeFlowpathLength -v ^
--wd=&quot;/path/to/data/&quot; -i=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/average_upslope_flowpath_length.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 25/07/2017</p>
<p><a name="Basins"></a></p>
<a class="header" href="#basins" id="basins"><h1>Basins</h1></a>
<p>This tool can be used to delineate all of the drainage basins contained within a local drainage direction,
or flow pointer raster (<code>--d8_pntr</code>), and draining to the edge of the data. The flow pointer raster must be derived using
the <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a> tool and should have been extracted from a digital elevation model (DEM) that has been
hydrologically pre-processed to remove topographic depressions and flat areas, e.g. using the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>
tool. By default, the flow pointer raster is assumed to use the clockwise indexing method used by WhiteboxTools:</p>
<table><thead><tr><th align="center"> .  </th><th>  .  </th><th>  . </th></tr></thead><tbody>
<tr><td align="center"> 64 </td><td align="center"> 128 </td><td align="center"> 1  </td></tr>
<tr><td align="center"> 32 </td><td align="center">  0  </td><td align="center"> 2  </td></tr>
<tr><td align="center"> 16 </td><td align="center">  8  </td><td align="center"> 4  </td></tr>
</tbody></table>
<p>If the pointer file contains ESRI flow direction values instead, the <code>--esri_pntr</code> parameter must be specified.</p>
<p>The <a href="./hydrological_analysis.html#basins"><strong>Basins</strong></a> and <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> tools are similar in function but while the <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> tool identifies the upslope areas
that drain to one or more user-specified outlet points, the <a href="./hydrological_analysis.html#basins"><strong>Basins</strong></a> tool automatically sets outlets to all grid cells
situated along the edge of the data that do not have a defined flow direction (i.e. they do not have a lower neighbour).
Notice that these edge outlets need not be situated along the edges of the flow-pointer raster, but rather along the
edges of the region of valid data. That is, the DEM from which the flow-pointer has been extracted may incompletely
fill the containing raster, if it is irregular shaped, and NoData regions may occupy the peripherals. Thus, the entire
region of valid data in the flow pointer raster will be divided into a set of mutually exclusive basins using this tool.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input raster D8 pointer file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.basins(
    d8_pntr, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Basins -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr='d8pntr.tif' -o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/basins.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 01/07/2017</p>
<p><a name="BreachDepressions"></a></p>
<a class="header" href="#breachdepressions" id="breachdepressions"><h1>BreachDepressions</h1></a>
<p>This tool can be used to remove the depressions in a digital elevation model (DEM), a
common requirement of spatial hydrological operations such as flow accumulation
and watershed modelling. The tool based on on the efficient hybrid depression
breaching algorithm described by Lindsay (2016). It uses a breach-first, fill-second
approach to resolving continous flowpaths through depressions.</p>
<p>Notice that when the input DEM (<code>--dem</code>) contains deep, single-cell pits, it can be useful
to raise the pits elevation to that of the lowest neighbour (<code>--fill_pits</code>), to avoid the
creation of deep breach trenches. Deep pits can be common in DEMs containing speckle-type noise.
This option, however, does add slightly to the computation time of the tool.</p>
<p>The user may optionally (<code>--flat_increment</code>) override the default value applied to increment elevations on
flat areas (often formed by the subsequent depression filling operation). The default value is
dependent upon the elevation range in the input DEM and is generally a very small elevation value (e.g.
0.001). It may be necessary to override the default elevation increment value in landscapes where there
are extensive flat areas resulting from depression filling (and along breach channels). Values in the range
0.00001 to 0.01 are generally appropriate. increment values that are too large can result in obvious artifacts
along flattened sites, which may extend beyond the flats, and values that are too small (i.e. smaller than the
numerical precision) may result in the presence of grid cells with no downslope neighbour in the
output DEM. The output DEM will always use 64-bit floating point values for storing elevations because of
the need to precisely represent small elevation differences along flats. Therefore, if the input DEM is stored
at a lower level of precision (e.g. 32-bit floating point elevations), this may result in a doubling of
the size of the DEM.</p>
<p><em>Reference</em>:</p>
<p>Lindsay JB. 2016. <em>Efficient hybrid breaching-filling sink removal methods for
flow path enforcement in digital elevation models.</em> <strong>Hydrological Processes</strong>,
30(6): 846–857. DOI: 10.1002/hyp.10648</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./hydrological_analysis.html#fillsinglecellpits"><strong>FillSingleCellPits</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--max_depth        </td><td> Optional maximum breach depth (default is Inf)</td></tr>
<tr><td>--max_length       </td><td> Optional maximum breach channel length (in grid cells; default is Inf)</td></tr>
<tr><td>--flat_increment   </td><td> Optional elevation increment applied to flat areas</td></tr>
<tr><td>--fill_pits        </td><td> Optional flag indicating whether to fill single-cell pits</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.breach_depressions(
    dem, 
    output, 
    max_depth=None, 
    max_length=None, 
    flat_increment=None, 
    fill_pits=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=BreachDepressions -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/breach_depressions.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 28/06/2017</p>
<p><a name="BreachSingleCellPits"></a></p>
<a class="header" href="#breachsinglecellpits" id="breachsinglecellpits"><h1>BreachSingleCellPits</h1></a>
<p>This tool can be used to remove pits from a digital elevation model (DEM). Pits are single grid cells
with no downslope neighbours. They are important because they impede overland flow-paths. This tool will
remove any pit in the input DEM (<code>--dem</code>) that can be resolved by lowering one of the eight neighbouring
cells such that a flow-path can be created linking the pit to a second-order neighbour, i.e. a neighbouring
cell of a neighbouring cell. Notice that this tool can be a useful pre-processing technique before running
one of the more robust depression filling or breaching techniques (e.g. <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> and
<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>), which are designed to remove larger depression features.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#fillsinglecellpits"><strong>FillSingleCellPits</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.breach_single_cell_pits(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=BreachSingleCellPits -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/breach_pits.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 26/06/2017</p>
<p><a name="D8FlowAccumulation"></a></p>
<a class="header" href="#d8flowaccumulation" id="d8flowaccumulation"><h1>D8FlowAccumulation</h1></a>
<p>This tool is used to generate a flow accumulation grid (i.e. catchment area) using the
D8 (O'Callaghan and Mark, 1984) algorithm. This algorithm is an example of single-flow-direction
(SFD) method because the flow entering each grid cell is routed to only one downslope neighbour,
i.e. flow divergence is not permitted. The user must specify the name of the input digital
elevation model (DEM). The DEM must have been hydrologically corrected to remove all spurious
depressions and flat areas. DEM pre-processing is usually achieved using the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or
<a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tools.</p>
<p>In addition to the input DEM, the user must specify the output type. The output flow-accumulation
can be 1) <code>cells</code> (i.e. the number of inflowing grid cells), <code>catchment area</code> (i.e. the upslope area),
or <code>specific contributing area</code> (i.e. the catchment area divided by the flow width. The default value
is <code>cells</code>. The user must also specify whether the output flow-accumulation grid should be
log-tranformed (<code>--log</code>), i.e. the output, if this option is selected, will be the natural-logarithm of the
accumulated flow value. This is a transformation that is often performed to better visualize the
contributing area distribution. Because contributing areas tend to be very high along valley bottoms
and relatively low on hillslopes, when a flow-accumulation image is displayed, the distribution of
values on hillslopes tends to be 'washed out' because the palette is stretched out to represent the
highest values. Log-transformation provides a means of compensating for this phenomenon. Importantly,
however, log-transformed flow-accumulation grids must not be used to estimate other secondary terrain
indices, such as the wetness index, or relative stream power index.</p>
<p>Grid cells possessing the <strong>NoData</strong> value in the input flow-pointer grid are assigned the <strong>NoData</strong>
value in the output flow-accumulation image.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#dinfflowaccumulation"><strong>DInfFlowAccumulation</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--out_type         </td><td> Output type; one of 'cells' (default), 'catchment area', and 'specific contributing area'</td></tr>
<tr><td>--log              </td><td> Optional flag to request the output be log-transformed</td></tr>
<tr><td>--clip             </td><td> Optional flag to request clipping the display max by 1%</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.d8_flow_accumulation(
    dem, 
    output, 
    out_type=&quot;cells&quot;, 
    log=False, 
    clip=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=D8FlowAccumulation -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--out_type='cells'
&gt;&gt;./whitebox_tools -r=D8FlowAccumulation -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--out_type='specific catchment area' --log --clip 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/d8_flow_accum.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: June 26, 2017</p>
<p><a name="D8MassFlux"></a></p>
<a class="header" href="#d8massflux" id="d8massflux"><h1>D8MassFlux</h1></a>
<p>Performs a D8 mass flux calculation.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--dem              </td><td> Input raster DEM file</td></tr>
<tr><td>--loading          </td><td> Input loading raster file</td></tr>
<tr><td>--efficiency       </td><td> Input efficiency raster file</td></tr>
<tr><td>--absorption       </td><td> Input absorption raster file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.d8_mass_flux(
    dem, 
    loading, 
    efficiency, 
    absorption, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=D8MassFlux -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif --loading=load.tif --efficiency=eff.tif ^
--absorption=abs.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/d8_mass_flux.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: Dec. 29, 2017</p>
<p><a name="D8Pointer"></a></p>
<a class="header" href="#d8pointer" id="d8pointer"><h1>D8Pointer</h1></a>
<p>This tool is used to generate a flow pointer grid using the simple D8 (O'Callaghan and Mark, 1984) algorithm. The
user must specify the name (<code>--dem</code>) of a digital elevation model (DEM) that has been hydrologically
corrected to remove all spurious depressions and flat areas. DEM pre-processing is usually achived using
either the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool. The local drainage direction raster output (<code>--output</code>)
by this tool serves as a necessary input for several other spatial hydrology and stream network analysis tools
in the toolset. Some tools will calculate this flow pointer raster directly from the input DEM.</p>
<p>By default, D8 flow pointers use the following clockwise, base-2 numeric index convention:</p>
<table><thead><tr><th align="center"> .  </th><th>  .  </th><th>  . </th></tr></thead><tbody>
<tr><td align="center"> 64 </td><td align="center"> 128 </td><td align="center"> 1  </td></tr>
<tr><td align="center"> 32 </td><td align="center">  0  </td><td align="center"> 2  </td></tr>
<tr><td align="center"> 16 </td><td align="center">  8  </td><td align="center"> 4  </td></tr>
</tbody></table>
<p>Notice that grid cells that have no lower neighbours are assigned a flow direction of zero. In a DEM that has been
pre-processed to remove all depressions and flat areas, this condition will only occur along the edges of the grid.
If the pointer file contains ESRI flow direction values instead, the <code>--esri_pntr</code> parameter must be specified.</p>
<p>Grid cells possessing the NoData value in the input DEM are assigned the NoData value in the output image.</p>
<p><em>Reference</em>:</p>
<p>O'Callaghan, J. F., &amp; Mark, D. M. (1984). The extraction of drainage networks from digital elevation data.
Computer vision, graphics, and image processing, 28(3), 323-344.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#dinfpointer"><strong>DInfPointer</strong></a>, <a href="./hydrological_analysis.html#fd8pointer"><strong>FD8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.d8_pointer(
    dem, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=D8Pointer -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/d8_pointer.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 16/06/2017</p>
<p><a name="DInfFlowAccumulation"></a></p>
<a class="header" href="#dinfflowaccumulation" id="dinfflowaccumulation"><h1>DInfFlowAccumulation</h1></a>
<p>This tool is used to generate a flow accumulation grid (i.e. contributing area) using the D-infinity algorithm
(Tarboton, 1997). This algorithm is an examples of a multiple-flow-direction (MFD) method because the flow entering
each grid cell is routed to one or two downslope neighbour, i.e. flow divergence is permitted. The user must
specify the name of the input pointer-grid, which has been created either from the Dinf flow-pointer tool. The
flow-pointer grid should be created from a digital elevation model (DEM) that has been hydrologically corrected
to remove all spurious depressions and flat areas. DEM pre-processing is usually achieved using the
<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool.</p>
<p>In addition to the input flow-pointer grid name, the user must specify the output type (<code>--out_type</code>). The output
flow-accumulation
can be 1) specific catchment area (SCA), which is the upslope contributing area divided by the contour length (taken
as the grid resolution), 2) total catchment area in square-metres, or 3) the number of upslope grid cells. The user
must also specify whether the output flow-accumulation grid should be log-tranformed, i.e. the output, if this option
is selected, will be the natural-logarithm of the accumulated area. This is a transformation that is often performed
to better visualize the contributing area distribution. Because contributing areas tend to be very high along valley
bottoms and relatively low on hillslopes, when a flow-accumulation image is displayed, the distribution of values on
hillslopes tends to be 'washed out' because the palette is stretched out to represent the highest values.
Log-transformation (<code>--log</code>) provides a means of compensating for this phenomenon. Importantly, however, log-transformed
flow-accumulation grids must not be used to estimate other secondary terrain indices, such as the wetness index, or
relative stream power index.</p>
<p>Grid cells possessing the NoData value in the input flow-pointer grid are assigned the NoData value in the output
flow-accumulation image. The output raster is of the float data type and continuous data scale.</p>
<p><em>Reference</em>:</p>
<p>Tarboton, D. G. (1997). A new method for the determination of flow directions and upslope areas in grid digital
elevation models. Water resources research, 33(2), 309-319.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--out_type         </td><td> Output type; one of 'cells', 'sca' (default), and 'ca'</td></tr>
<tr><td>--threshold        </td><td> Optional convergence threshold parameter, in grid cells; default is inifinity</td></tr>
<tr><td>--log              </td><td> Optional flag to request the output be log-transformed</td></tr>
<tr><td>--clip             </td><td> Optional flag to request clipping the display max by 1%</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.d_inf_flow_accumulation(
    dem, 
    output, 
    out_type=&quot;Specific Contributing Area&quot;, 
    threshold=None, 
    log=False, 
    clip=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=DInfFlowAccumulation -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--out_type=sca
&gt;&gt;./whitebox_tools -r=DInfFlowAccumulation -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--out_type=sca --threshold=10000 --log --clip 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/dinf_flow_accum.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 24/06/2017</p>
<p><a name="DInfMassFlux"></a></p>
<a class="header" href="#dinfmassflux" id="dinfmassflux"><h1>DInfMassFlux</h1></a>
<p>Performs a D-infinity mass flux calculation.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--dem              </td><td> Input raster DEM file</td></tr>
<tr><td>--loading          </td><td> Input loading raster file</td></tr>
<tr><td>--efficiency       </td><td> Input efficiency raster file</td></tr>
<tr><td>--absorption       </td><td> Input absorption raster file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.d_inf_mass_flux(
    dem, 
    loading, 
    efficiency, 
    absorption, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=DInfMassFlux -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif --loading=load.tif --efficiency=eff.tif ^
--absorption=abs.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/dinf_mass_flux.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: Dec. 29, 2017</p>
<p><a name="DInfPointer"></a></p>
<a class="header" href="#dinfpointer" id="dinfpointer"><h1>DInfPointer</h1></a>
<p>Calculates a D-infinity flow pointer (flow direction) raster from an input DEM.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.d_inf_pointer(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=DInfPointer -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/dinf_pointer.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: June 26, 2017</p>
<p><a name="DepthInSink"></a></p>
<a class="header" href="#depthinsink" id="depthinsink"><h1>DepthInSink</h1></a>
<p>This tool measures the depth that each grid cell in an input (<code>--dem</code>) raster digital elevation model (DEM)
lies within a sink feature, i.e. a closed topographic depression. A sink, or depression, is a bowl-like
landscape feature, which is characterized by interior drainage and groundwater recharge. The <a href="./hydrological_analysis.html#depthinsink"><strong>DepthInSink</strong></a> tool
operates by differencing a filled DEM, using the same depression filling method as <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, and the
original surface model.</p>
<p>In addition to the names of the input DEM (<code>--dem</code>) and the output raster (<code>--output</code>), the user must specify
whether the background value (i.e. the value assigned to grid cells that are not contained within sinks) should be
set to 0.0 (<code>--zero_background</code>) Without this optional parameter specified, the tool will use the NoData value
as the background value.</p>
<p><em>Reference</em>:</p>
<p>Antonić, O., Hatic, D., &amp; Pernar, R. (2001). DEM-based depth in sink as an environmental estimator. Ecological
Modelling, 138(1-3), 247-254.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--zero_background  </td><td> Flag indicating whether the background value of zero should be used</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.depth_in_sink(
    dem, 
    output, 
    zero_background=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=DepthInSink -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif --zero_background 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/depth_in_sink.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 11/07/2017</p>
<p><a name="DownslopeDistanceToStream"></a></p>
<a class="header" href="#downslopedistancetostream" id="downslopedistancetostream"><h1>DownslopeDistanceToStream</h1></a>
<p>This tool can be used to calculate the distance from each grid cell in a raster to the nearest stream cell,
measured along the downslope flowpath. The user must specify the name of an input digital elevation model (<code>--dem</code>)
and streams raster (<code>--streams</code>). The DEM must have been pre-processed to remove artifact topographic depressions
and flat areas (see <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>). The streams raster should have been created using one of the DEM-based
stream mapping methods, i.e. contributing area thresholding. Stream cells are designated in this raster as all
non-zero values. The output of this tool, along with the <a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a> tool, can be useful for preliminary
flood plain mapping when combined with high-accuracy DEM data.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a>, <a href="./stream_network_analysis.html#distancetooutlet"><strong>DistanceToOutlet</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.downslope_distance_to_stream(
    dem, 
    streams, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=DownslopeDistanceToStream -v ^
--wd=&quot;/path/to/data/&quot; --dem='dem.tif' --streams='streams.tif' ^
-o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/downslope_distance_to_stream.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 9/07/2017</p>
<p><a name="DownslopeFlowpathLength"></a></p>
<a class="header" href="#downslopeflowpathlength" id="downslopeflowpathlength"><h1>DownslopeFlowpathLength</h1></a>
<p>This tool can be used to calculate the downslope flowpath length from each grid cell in a raster to
an outlet cell either at the edge of the grid or at the outlet point of a watershed. The user must
specify the name of a flow pointer grid (<code>--d8_pntr</code>) derived using the D8 flow algorithm (<a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>).
This grid should be derived from a digital elevation model (DEM) that has been pre-processed to remove
artifact topographic depressions and flat areas (<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>). The user may also
optionally provide watershed (<code>--watersheds</code>) and weights (<code>--weights</code>) images. The optional watershed
image can be used to define one or more irregular-shaped watershed boundaries. Flowpath lengths are
measured within each watershed in the watershed image (each defined by a unique identifying number) as
the flowpath length to the watershed's outlet cell.</p>
<p>The optional weight image is multiplied by the flow-length through each grid cell. This can be useful
when there is a need to convert the units of the output image. For example, the default unit of
flowpath lengths is the same as the input image(s). Thus, if the input image has X-Y coordinates
measured in metres, the output image will likely contain very large values. A weight image containing
a value of 0.001 for each grid cell will effectively convert the output flowpath lengths into kilometres.
The weight image can also be used to convert the flowpath distances into travel times by multiplying the
flow distance through a grid cell by the average velocity.</p>
<p>NoData valued grid cells in any of the input images will be assigned NoData values in the output image.
The output raster is of the float data type and continuous data scale.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>--watersheds       </td><td> Optional input watershed raster file</td></tr>
<tr><td>--weights          </td><td> Optional input weights raster file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.downslope_flowpath_length(
    d8_pntr, 
    output, 
    watersheds=None, 
    weights=None, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=DownslopeFlowpathLength -v ^
--wd=&quot;/path/to/data/&quot; --d8_pntr=pointer.tif ^
-o=flowpath_len.tif
&gt;&gt;./whitebox_tools ^
-r=DownslopeFlowpathLength -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr=pointer.tif --watersheds=basin.tif ^
--weights=weights.tif -o=flowpath_len.tif --esri_pntr 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/downslope_flowpath_length.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: July 8, 2017</p>
<p><a name="ElevationAboveStream"></a></p>
<a class="header" href="#elevationabovestream" id="elevationabovestream"><h1>ElevationAboveStream</h1></a>
<p>This tool can be used to calculate the elevation of each grid cell in a raster above the nearest stream cell,
measured along the downslope flowpath. This terrain index, a measure of relative topographic position, is
essentially equivalent to the 'height above drainage' (HAND), as described by Renno et al. (2008). The user must
specify the name of an input digital elevation model (<code>--dem</code>) and streams raster (<code>--streams</code>). The DEM
must have been pre-processed to remove artifact topographic depressions and flat areas (see <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>).
The streams raster should have been created using one of the DEM-based stream mapping methods, i.e. contributing
area thresholding. Stream cells are designated in this raster as all non-zero values. The output of this tool,
along with the <a href="./hydrological_analysis.html#downslopedistancetostream"><strong>DownslopeDistanceToStream</strong></a> tool, can be useful for preliminary flood plain mapping when combined
with high-accuracy DEM data.</p>
<p>The difference between <a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a> and <a href="./hydrological_analysis.html#elevationabovestreameuclidean"><strong>ElevationAboveStreamEuclidean</strong></a> is that the former calculates
distances along drainage flow-paths while the latter calculates straight-line distances to streams channels.</p>
<p><em>Reference</em>:</p>
<p>Renno, C. D., Nobre, A. D., Cuartas, L. A., Soares, J. V., Hodnett, M. G., Tomasella, J., &amp; Waterloo, M. J.
(2008). HAND, a new terrain descriptor using SRTM-DEM: Mapping terra-firme rainforest environments in Amazonia.
Remote Sensing of Environment, 112(9), 3469-3481.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#elevationabovestreameuclidean"><strong>ElevationAboveStreamEuclidean</strong></a>, <a href="./hydrological_analysis.html#downslopedistancetostream"><strong>DownslopeDistanceToStream</strong></a>, <a href="./geomorphometric_analysis.html#elevabovepit"><strong>ElevAbovePit</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.elevation_above_stream(
    dem, 
    streams, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=ElevationAboveStream -v ^
--wd=&quot;/path/to/data/&quot; --dem='dem.tif' --streams='streams.tif' ^
-o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/elevation_above_stream.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: July 9, 2017</p>
<p><a name="ElevationAboveStreamEuclidean"></a></p>
<a class="header" href="#elevationabovestreameuclidean" id="elevationabovestreameuclidean"><h1>ElevationAboveStreamEuclidean</h1></a>
<p>This tool can be used to calculate the elevation of each grid cell in a raster above the nearest stream cell,
measured along the straight-line distance. This terrain index, a measure of relative topographic position, is
related to the 'height above drainage' (HAND), as described by Renno et al. (2008). HAND is generally estimated
with distances measured along drainage flow-paths, which can be calculated using the <a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a> tool.
The user must specify the name of an input digital elevation model (<code>--dem</code>) and streams raster (<code>--streams</code>).
Stream cells are designated in this raster as all non-zero values. The output of this tool,
along with the <a href="./hydrological_analysis.html#downslopedistancetostream"><strong>DownslopeDistanceToStream</strong></a> tool, can be useful for preliminary flood plain mapping when combined
with high-accuracy DEM data.</p>
<p>The difference between <a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a> and <a href="./hydrological_analysis.html#elevationabovestreameuclidean"><strong>ElevationAboveStreamEuclidean</strong></a> is that the former calculates
distances along drainage flow-paths while the latter calculates straight-line distances to streams channels.</p>
<p><em>Reference</em>:</p>
<p>Renno, C. D., Nobre, A. D., Cuartas, L. A., Soares, J. V., Hodnett, M. G., Tomasella, J., &amp; Waterloo, M. J.
(2008). HAND, a new terrain descriptor using SRTM-DEM: Mapping terra-firme rainforest environments in Amazonia.
Remote Sensing of Environment, 112(9), 3469-3481.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#elevationabovestream"><strong>ElevationAboveStream</strong></a>, <a href="./hydrological_analysis.html#downslopedistancetostream"><strong>DownslopeDistanceToStream</strong></a>, <a href="./geomorphometric_analysis.html#elevabovepit"><strong>ElevAbovePit</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.elevation_above_stream_euclidean(
    dem, 
    streams, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=ElevationAboveStreamEuclidean -v ^
--wd=&quot;/path/to/data/&quot; -i=DEM.tif --streams=streams.tif ^
-o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/elevation_above_stream_euclidean.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 11/03/2018</p>
<p><a name="Fd8FlowAccumulation"></a></p>
<a class="header" href="#fd8flowaccumulation" id="fd8flowaccumulation"><h1>Fd8FlowAccumulation</h1></a>
<p>This tool is used to generate a flow accumulation grid (i.e. contributing area) using the FD8 algorithm (Freeman,
1991). This algorithm is an examples of a multiple-flow-direction (MFD) method because the flow entering each
grid cell is routed to each downslope neighbour, i.e. flow divergence is permitted. The user must specify the
name (<code>--dem</code>) of the input digital elevation model (DEM). The DEM must have been hydrologically
corrected to remove all spurious depressions and flat areas. DEM pre-processing is usually achived using
either the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool. A value must also be specified for the exponent parameter
(<code>--exponent</code>), a number that controls the degree of dispersion in the resulting flow-accumulation grid. A lower
value yields greater apparent flow dispersion across divergent hillslopes. Some experimentation suggests that a
value of 1.1 is appropriate (Freeman, 1991), although this is almost certainly landscape-dependent.</p>
<p>In addition to the input DEM, the user must specify the output type. The output flow-accumulation
can be 1) <code>cells</code> (i.e. the number of inflowing grid cells), <code>catchment area</code> (i.e. the upslope area),
or <code>specific contributing area</code> (i.e. the catchment area divided by the flow width. The default value
is <code>cells</code>. The user must also specify whether the output flow-accumulation grid should be
log-tranformed (<code>--log</code>), i.e. the output, if this option is selected, will be the natural-logarithm of the
accumulated flow value. This is a transformation that is often performed to better visualize the
contributing area distribution. Because contributing areas tend to be very high along valley bottoms
and relatively low on hillslopes, when a flow-accumulation image is displayed, the distribution of
values on hillslopes tends to be 'washed out' because the palette is stretched out to represent the
highest values. Log-transformation provides a means of compensating for this phenomenon. Importantly,
however, log-transformed flow-accumulation grids must not be used to estimate other secondary terrain
indices, such as the wetness index, or relative stream power index.</p>
<p>The non-dispersive threshold (<code>--threshold</code>) is a flow-accumulation value (measured in upslope grid cells,
which is directly proportional to area) above which flow dispersion is not longer permited. Grid cells with
flow-accumulation values above this threshold will have their flow routed in a manner that is similar to
the D8 single-flow-direction algorithm, directing all flow towards the steepest downslope neighbour. This
is usually done under the assumption that flow dispersion, whilst appropriate on hillslope areas, is not
realistic once flow becomes channelized.</p>
<p>Grid cells possessing the NoData value in the input flow-pointer grid are assigned the NoData value in the
output flow-accumulation image.</p>
<p><em>Reference</em>:</p>
<p>Freeman, T. G. (1991). Calculating catchment area with divergent flow based on a regular grid. Computers and
Geosciences, 17(3), 413-422.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#d8flowaccumulation"><strong>D8FlowAccumulation</strong></a>, <a href="./hydrological_analysis.html#dinfflowaccumulation"><strong>DInfFlowAccumulation</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--out_type         </td><td> Output type; one of 'cells', 'specific contributing area' (default), and 'catchment area'</td></tr>
<tr><td>--exponent         </td><td> Optional exponent parameter; default is 1.1</td></tr>
<tr><td>--threshold        </td><td> Optional convergence threshold parameter, in grid cells; default is inifinity</td></tr>
<tr><td>--log              </td><td> Optional flag to request the output be log-transformed</td></tr>
<tr><td>--clip             </td><td> Optional flag to request clipping the display max by 1%</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.fd8_flow_accumulation(
    dem, 
    output, 
    out_type=&quot;specific contributing area&quot;, 
    exponent=1.1, 
    threshold=None, 
    log=False, 
    clip=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FD8FlowAccumulation -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--out_type='cells'
&gt;&gt;./whitebox_tools -r=FD8FlowAccumulation -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--out_type='catchment area' --exponent=1.5 --threshold=10000 ^
--log --clip 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/fd8_flow_accum.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 26/06/2017</p>
<p><a name="Fd8Pointer"></a></p>
<a class="header" href="#fd8pointer" id="fd8pointer"><h1>Fd8Pointer</h1></a>
<p>This tool is used to generate a flow pointer grid (i.e. flow direction) using the FD8 (Freeman, 1991) algorithm.
FD8 is a multiple-flow-direction (MFD) method because the flow entering each grid cell is routed one or more
downslope neighbours, i.e. flow divergence is permitted. The user must specify the name of a digital elevation model
(DEM; <code>--dem</code>) that has been hydrologically corrected to remove all spurious depressions and flat areas.
DEM pre-processing is usually achived using the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tools.</p>
<p>By default, D8 flow pointers use the following clockwise, base-2 numeric index convention:</p>
<table><thead><tr><th align="center"> .  </th><th>  .  </th><th>  . </th></tr></thead><tbody>
<tr><td align="center"> 64 </td><td align="center"> 128 </td><td align="center"> 1  </td></tr>
<tr><td align="center"> 32 </td><td align="center">  0  </td><td align="center"> 2  </td></tr>
<tr><td align="center"> 16 </td><td align="center">  8  </td><td align="center"> 4  </td></tr>
</tbody></table>
<p>In the case of the FD8 algorithm, some portion of the flow entering a grid cell will be sent to each downslope
neighbour. Thus, the FD8 flow-pointer value is the sum of each of the individual pointers for all downslope neighbours.
For example, if a grid cell has downslope neighbours to the northeast, east, and south the corresponding FD8
flow-pointer value will be 1 + 2 + 8 = 11. Using the naming convention above, this is the only combination of
flow-pointers that will result in the combined value of 11. Using the base-2 naming convention allows for the
storage of complex combinations of flow-points using a single numeric value, which is the reason for using this
somewhat odd convention.</p>
<p><em>Reference</em>:</p>
<p>Freeman, T. G. (1991). Calculating catchment area with divergent flow based on a regular grid. Computers and
Geosciences, 17(3), 413-422.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#fd8flowaccumulation"><strong>FD8FlowAccumulation</strong></a>, <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#dinfpointer"><strong>DInfPointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.fd8_pointer(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FD8Pointer -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/fd8_pointer.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 28/06/2017</p>
<p><a name="FillBurn"></a></p>
<a class="header" href="#fillburn" id="fillburn"><h1>FillBurn</h1></a>
<p>Burns streams into a DEM using the FillBurn (Saunders, 1999) method. This tool uses the
algorithm described in:</p>
<p>Lindsay JB. 2016. The practice of DEM stream burning revisited. Earth Surface Processes
and Landforms, 41(5): 658-668. DOI: 10.1002/esp.3888</p>
<p>And:</p>
<p>Saunders, W. 1999. Preparation of DEMs for use in environmental modeling analysis, in: ESRI User
Conference. pp. 24-30.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--dem              </td><td> Input raster DEM file</td></tr>
<tr><td>--streams          </td><td> Input vector streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.fill_burn(
    dem, 
    streams, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FillBurn -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif --streams=streams.shp -o=dem_burned.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/fill_burn.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 01/04/2018</p>
<p><a name="FillDepressions"></a></p>
<a class="header" href="#filldepressions" id="filldepressions"><h1>FillDepressions</h1></a>
<p>This tool can be used to fill all of the depressions in a digital elevation model (DEM) and to remove the f
lat areas. This is a common pre-processing step required by many flow-path analysis tools to ensure continuous
flow from each grid cell to an outlet located along the grid edge. The <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> algorithm is based on
the computationally efficient approach of examining each cell based on its spill elevation, starting from the
edge cells, and visiting cells from lowest order using a priority queue. As such, it is based on the algorithm
first proposed by Wang and Liu (2006). It is currently the most efficient depression-removal algorithm available
in WhiteboxTools, although it is not significantly more efficient than the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> tool, which is
known to provide a solution to depression removal with less impact of the DEM.</p>
<p>If the input DEM has gaps, or missing-data holes, that contain NoData values, it is better to use the
<a href="./geomorphometric_analysis.html#fillmissingdata"><strong>FillMissingData</strong></a> tool to repair these gaps. This tool will interpolate values across the gaps and produce
a more natural-looking surface than the flat areas that are produced by depression filling. Importantly, the
<a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool algorithm implementation assumes that there are no 'donut hole' NoData gaps within the area
of valid data. Any NoData areas along the edge of the grid will simply be ignored and will remain NoData areas in
the output image.</p>
<p><em>Reference</em>:</p>
<p>Wang, L. and Lui, H. 2006. An efficient method for identifying and filling surface depressions in digital elevation
models for hydrologic analysis and modelling. International Journal of Geographical Information Science, 20(2): 193-213.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./geomorphometric_analysis.html#fillmissingdata"><strong>FillMissingData</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--fix_flats        </td><td> Optional flag indicating whether flat areas should have a small gradient applied</td></tr>
<tr><td>--flat_increment   </td><td> Optional elevation increment applied to flat areas</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.fill_depressions(
    dem, 
    output, 
    fix_flats=True, 
    flat_increment=None, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FillDepressions -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=output.tif ^
--fix_flats 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/fill_depressions.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 28/06/2017</p>
<p><a name="FillSingleCellPits"></a></p>
<a class="header" href="#fillsinglecellpits" id="fillsinglecellpits"><h1>FillSingleCellPits</h1></a>
<p>This tool can be used to remove pits from a digital elevation model (DEM). Pits are single grid cells with no
downslope neighbours. They are important because they impede overland flow-paths. This tool will remove any
pits in the input DEM that can be resolved by raising the elevation of the pit such that flow will continue
past the pit cell to one of the downslope neighbours. Notice that this tool can be a useful pre-processing
technique before running one of the more robust depression breaching (<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>) or filling
(<a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>) techniques, which are designed to remove larger depression features.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./hydrological_analysis.html#breachsinglecellpits"><strong>BreachSingleCellPits</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.fill_single_cell_pits(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FillSingleCellPits -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=NewRaster.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/fill_pits.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 11/07/2017</p>
<p><a name="FindNoFlowCells"></a></p>
<a class="header" href="#findnoflowcells" id="findnoflowcells"><h1>FindNoFlowCells</h1></a>
<p>This tool can be used to find cells with undefined flow, i.e. no valid flow direction, based on the
D8 flow direction algorithm (<a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>). These cells are therefore either at the bottom of a topographic
depression or in the interior of a flat area. In a digital elevation model (DEM) that has been
pre-processed to remove all depressions and flat areas (<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>), this condition will only occur
along the edges of the grid, otherwise no-flow grid cells can be situation in the interior. The user must
specify the name (<code>--dem</code>) of the DEM.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.find_no_flow_cells(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FindNoFlowCells -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=NewRaster.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/find_noflow_cells.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 11/07/2017</p>
<p><a name="FindParallelFlow"></a></p>
<a class="header" href="#findparallelflow" id="findparallelflow"><h1>FindParallelFlow</h1></a>
<p>This tool can be used to find cells in a stream network grid that possess parallel flow directions based
on an input D8 flow-pointer grid (<a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>). Because streams rarely flow in parallel for significant
distances, these areas are likely errors resulting from the biased assignment of flow direction based on
the D8 method.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.find_parallel_flow(
    d8_pntr, 
    streams, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FindParallelFlow -v ^
--wd=&quot;/path/to/data/&quot; --d8_pntr=pointer.tif ^
-o=out.tif
&gt;&gt;./whitebox_tools -r=FindParallelFlow -v ^
--wd=&quot;/path/to/data/&quot; --d8_pntr=pointer.tif -o=out.tif ^
--streams='streams.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/find_parallel_flow.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 11/07/2017</p>
<p><a name="FlattenLakes"></a></p>
<a class="header" href="#flattenlakes" id="flattenlakes"><h1>FlattenLakes</h1></a>
<p>This tool can be used to set the elevations contained in a set of input vector lake polygons (<code>--lakes</code>) to
a consistent value within an input (<code>--dem</code>) digital elevation model (DEM). Lake flattening is
a common pre-processing step for DEMs intended for use in hydrological applications. This algorithm
determines lake elevation automatically based on the minimum perimeter elevation for each lake
polygon. The minimum perimeter elevation is assumed to be the lake outlet elevation and is assigned
to the entire interior region of lake polygons, excluding island geometries. Note, this tool will not
provide satisfactory results if the input vector polygons contain wide river features rather than true
lakes.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>--lakes            </td><td> Input lakes vector polygons file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.flatten_lakes(
    dem, 
    lakes, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FlattenLakes -v --wd=&quot;/path/to/data/&quot; ^
--dem='DEM.tif' --lakes='lakes.shp' -o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/flatten_lakes.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 29/03/2018</p>
<p><a name="FloodOrder"></a></p>
<a class="header" href="#floodorder" id="floodorder"><h1>FloodOrder</h1></a>
<p>This tool takes an input digital elevation model (DEM) and creates an output raster where every grid cell
contains the flood order of that cell within the DEM. The flood order is the sequence of grid cells that
are encountered during a search, starting from the raster grid edges and the lowest grid cell, moving inward
at increasing elevations. This is in fact similar to how the highly efficient Wang and Liu (2006) depression
filling algorithm and the Breach Depressions (Fast) operates. The output flood order raster contains the
sequential order, from lowest edge cell to the highest pixel in the DEM.</p>
<p>Like the <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool, <a href="./hydrological_analysis.html#floodorder"><strong>FloodOrder</strong></a> will read the entire DEM into memory. This may make the
algorithm ill suited to processing massive DEMs except where the user's computer has substantial memory
(RAM) resources.</p>
<p><em>Reference</em>:</p>
<p>Wang, L., and Liu, H. (2006). An efficient method for identifying and filling surface depressions in digital
elevation models for hydrologic analysis and modelling. International Journal of Geographical Information Science,
20(2), 193-213.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.flood_order(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FloodOrder -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/flood_order.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 12/07/2017</p>
<p><a name="FlowAccumulationFullWorkflow"></a></p>
<a class="header" href="#flowaccumulationfullworkflow" id="flowaccumulationfullworkflow"><h1>FlowAccumulationFullWorkflow</h1></a>
<p>Resolves all of the depressions in a DEM, outputting a breached DEM, an aspect-aligned non-divergent flow pointer, and a flow accumulation raster.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>--out_dem          </td><td> Output raster DEM file</td></tr>
<tr><td>--out_pntr         </td><td> Output raster flow pointer file</td></tr>
<tr><td>--out_accum        </td><td> Output raster flow accumulation file</td></tr>
<tr><td>--out_type         </td><td> Output type; one of 'cells', 'sca' (default), and 'ca'</td></tr>
<tr><td>--log              </td><td> Optional flag to request the output be log-transformed</td></tr>
<tr><td>--clip             </td><td> Optional flag to request clipping the display max by 1%</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.flow_accumulation_full_workflow(
    dem, 
    out_dem, 
    out_pntr, 
    out_accum, 
    out_type=&quot;Specific Contributing Area&quot;, 
    log=False, 
    clip=False, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FlowAccumulationFullWorkflow -v ^
--wd=&quot;/path/to/data/&quot; --dem='DEM.tif' ^
--out_dem='DEM_filled.tif' --out_pntr='pointer.tif' ^
--out_accum='accum.tif' --out_type=sca --log --clip 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/flow_accum_full_workflow.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: June 28, 2017</p>
<p><a name="FlowLengthDiff"></a></p>
<a class="header" href="#flowlengthdiff" id="flowlengthdiff"><h1>FlowLengthDiff</h1></a>
<p><a href="./hydrological_analysis.html#flowlengthdiff"><strong>FlowLengthDiff</strong></a> calculates the local maximum absolute difference in downslope flowpath length,
which is useful in mapping drainage divides and ridges.</p>
<p><em>See Also</em>:</p>
<p><a href="./geomorphometric_analysis.html#maxbranchlength"><strong>MaxBranchLength</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.flow_length_diff(
    d8_pntr, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=FlowLengthDiff -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr=pointer.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/flow_length_diff.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: July 8, 2017</p>
<p><a name="Hillslopes"></a></p>
<a class="header" href="#hillslopes" id="hillslopes"><h1>Hillslopes</h1></a>
<p>This tool will identify the hillslopes associated with a user-specified stream network. Hillslopes
include the catchment areas draining to the left and right sides of each stream link in the network as well
as the catchment areas draining to all channel heads. <a href="./hydrological_analysis.html#hillslopes"><strong>Hillslopes</strong></a> are conceptually similar to <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a>,
except that sub-basins do not distinguish between the right-bank and left-bank catchment areas of stream links.
The <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a> tool simply assigns a unique identifier to each stream link in a stream network. Each hillslope
output by this tool is assigned a unique, positive identifier  value. All grid cells in the output raster that
coincide with a stream cell are assigned an idenifiter of zero, i.e. stream cells do not belong to any hillslope.</p>
<p>The user must specify the name of a flow pointer
(flow direction) raster (<code>--d8_pntr</code>), a streams raster (<code>--streams</code>), and the output raster (<code>--output</code>).
The flow pointer and streams rasters should be generated using the <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a> algorithm. This will require
a depressionless DEM, processed using either the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool.</p>
<p>By default, the pointer raster is assumed to use the clockwise indexing method used by WhiteboxTools.
If the pointer file contains ESRI flow direction values instead, the <code>--esri_pntr</code> parameter must be specified.</p>
<p>NoData values in the input flow pointer raster are assigned NoData values in the output image.</p>
<p><em>See Also</em>:</p>
<p><a href="./stream_network_analysis.html#streamlinkidentifier"><strong>StreamLinkIdentifier</strong></a>, <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a>, <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input raster D8 pointer file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.hillslopes(
    d8_pntr, 
    streams, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Hillslopes -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr='d8pntr.tif' --streams='streams.tif' ^
-o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/hillslopes.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 16/07/2017</p>
<p><a name="ImpoundmentSizeIndex"></a></p>
<a class="header" href="#impoundmentsizeindex" id="impoundmentsizeindex"><h1>ImpoundmentSizeIndex</h1></a>
<p>This tool can be used to calculate the impoundment size index (ISI) from a digital elevation model (DEM).
The ISI is a land-surface parameter related to the size of the impoundment that would result from inserting
a dam of a user-specified maximum length (<code>--damlength</code>) into each DEM grid cell. In addition to an
output dam-height raster (same name as <code>--output</code> file but with an <em>_dam_height</em> suffix appended), the tool outputs
a measure of impoundment size (<code>--out_type</code>) related to impoundment average depth, total volume, or flooded area.</p>
<p>Please note that this tool performs an extremely complex and computationally intensive flow-accumulation operation.
As such, it may take a substantial amount of processing time and may encounter issues (including memory issues) when
applied to very large DEMs. It is not necessary to pre-process the input DEM (<code>--dem</code>) to remove topographic depressions
and flat areas. The internal flow-accumulation operation will not be confounded by the presence of these features.</p>
<p><em>Reference</em>:</p>
<p>Lindsay, JB (2015) Modelling the spatial pattern of potential impoundment size from DEMs.
Online resource: <a href="https://whiteboxgeospatial.wordpress.com/2015/04/29/modelling-the-spatial-pattern-of-potential-impoundment-size-from-dems/">Whitebox Blog</a></p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#stochasticdepressionanalysis"><strong>StochasticDepressionAnalysis</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output file</td></tr>
<tr><td>--out_type         </td><td> Output type; one of 'depth' (default), 'volume', and 'area'</td></tr>
<tr><td>--damlength        </td><td> Maximum length of thr dam</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.impoundment_size_index(
    dem, 
    output, 
    damlength, 
    out_type=&quot;depth&quot;, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=ImpoundmentSizeIndex -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=out.tif ^
--out_type=depth --damlength=11 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/impoundment_index.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 28/05/2018</p>
<p><a name="Isobasins"></a></p>
<a class="header" href="#isobasins" id="isobasins"><h1>Isobasins</h1></a>
<p>This tool can be used to divide a landscape into a group of nearly equal-sized watersheds, known as <em>isobasins</em>.
The user must specify the name (<code>--dem</code>) of a digital elevation model (DEM), the output raster name (<code>--output</code>),
and the isobasin target area (<code>--size</code>) specified in units of grid cells. The DEM must have been hydrologically
corrected to remove all spurious depressions and flat areas. DEM pre-processing is usually achived using either
the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool. Several temporary rasters are created during the execution
and stored in memory of this tool.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#basins"><strong>Basins</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--size             </td><td> Target basin size, in grid cells</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.isobasins(
    dem, 
    output, 
    size, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Isobasins -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif --size=1000 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/isobasins.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 03/12/2017</p>
<p><a name="JensonSnapPourPoints"></a></p>
<a class="header" href="#jensonsnappourpoints" id="jensonsnappourpoints"><h1>JensonSnapPourPoints</h1></a>
<p>The <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a> tool can be used to move the location of vector pour points (i.e. outlets used in a <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>
operation) (<code>--pour_pts</code>) to the location coincident with the nearest stream cell (<code>--stream</code>) value within
a specified maximum distance (<code>--snap_dist</code>). The pour points file (<code>--pour_pts</code>) must be a vector file of <em>Point</em> ShapeType.</p>
<p>If the output of the <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a> tool is to be used with the <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> tool, the streams raster should
be generated by extracting the streams using the <a href="./hydrological_analysis.html#d8flowaccumulation"><strong>D8FlowAccumulation</strong></a> algorithm. The snap distance (<code>--snap_dist</code>), measured
in map units (e.g meters), must also be specified. This distance will serve as the search radius placed around each pour
point during the search for the nearst stream cell.</p>
<p>Lindsay et al. (2008) provide a detailed discussion of the <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a> technique, and other less sophisticated
but commonly used techniques (<a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a>) for adjusting pour point locations used in watershedding operations. In
most cases, the <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a> tool should be prefered over <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> for applications of
repositioning outlet points used in watershedding operations onto the digital stream lines contained in local drainage
direction rasters. Jenson's method relocates outlet points to the <em>nearest</em> stream cell while <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> relocated
outlets to the <em>largest</em> stream (designated by the largest flow accumulation value). In the common situation where outlet
cells are position near the confluence point of smaller tributary streams, the <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> tool may re-position
outlets on the main-trunk stream, which will result in watershed delineation of incorrect sub-basins.</p>
<p><em>Reference</em>:</p>
<p>Jenson, S. K. (1991), Applications of hydrological information automati-cally extracted from digital elevation
models, Hydrological Processes, 5, 31–44, doi:10.1002/hyp.3360050104.</p>
<p>Lindsay JB, Rothwell JJ, and Davies H. 2008. Mapping outlet points used for watershed delineation onto DEM-derived
stream networks, Water Resources Research, 44, W08442, doi:10.1029/2007WR006507.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a>, <a href="./hydrological_analysis.html#d8flowaccumulation"><strong>D8FlowAccumulation</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--pour_pts         </td><td> Input vector pour points (outlet) file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output vector file</td></tr>
<tr><td>--snap_dist        </td><td> Maximum snap distance in map units</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.jenson_snap_pour_points(
    pour_pts, 
    streams, 
    output, 
    snap_dist, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=JensonSnapPourPoints -v ^
--wd=&quot;/path/to/data/&quot; --pour_pts='pour_pts.shp' ^
--streams='streams.tif' -o='output.shp' --snap_dist=15.0 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/jenson_snap_pour_points.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 27/06/2017</p>
<p><a name="LongestFlowpath"></a></p>
<a class="header" href="#longestflowpath" id="longestflowpath"><h1>LongestFlowpath</h1></a>
<p>This tool delineates the longest flowpaths for a group of subbasins or watersheds.
Flowpaths are initiated along drainage divides and continue along the D8-defined
flow direction until either the subbasin outlet or DEM edge is encountered. Each input
subbasin/watershed will have an associated vector flowpath in the output image. <a href="./hydrological_analysis.html#longestflowpath"><strong>LongestFlowpath</strong></a>
is similar to the <code>r.lfp</code> plugin tool for GRASS GIS. The length of the longest flowpath
draining to an outlet is related to the time of concentration, which is a parameter
used in certain hydrological models.</p>
<p>The user must input the filename of a digital elevation model (DEM), a basins raster, and the
output vector. The DEM must be depressionless and should have been pre-processed using the
<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool. The <em>basins raster</em> must contain features
that are delineated by categorical (integer valued) unique indentifier values. All non-NoData,
non-zero valued grid cells in the basins raster are interpreted as belonging to features.
In practice, this tool is usual run using either a single watershed, a group of contiguous
non-overlapping watersheds, or a series of nested subbasins. These are often derived using
the <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> tool, based on a series of input outlets, or the <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a> tool, based on
an input stream network. If subbasins are input to <a href="./hydrological_analysis.html#longestflowpath"><strong>LongestFlowpath</strong></a>, each traced flowpath
will include only the non-overlapping portions within nested areas. Therefore, this can be a
convienent method of delineating the longest flowpath to each bifurcation in a stream network.</p>
<p>The output vector file will contain fields in the attribute table that identify the associated
basin unique identifier (<em>BASIN</em>), the elevation of the flowpath source point on the divide
(<em>UP_ELEV</em>), the elevation of the outlet point (<em>DN_ELEV</em>), the length of the flowpath (<em>LENGTH</em>),
and finally, the average slope (<em>AVG_SLOPE</em>) along the flowpath, measured as a percent grade.</p>
<p><em>See Also</em>:</p>
<p><code>MaximumUpslopeFlowpath</code>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>--basins           </td><td> Input raster basins file</td></tr>
<tr><td>-o, --output       </td><td> Output vector file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.longest_flowpath(
    dem, 
    basins, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=LongestFlowpath -v ^
--wd=&quot;/path/to/data/&quot; -i=DEM.tif --basins=basins.tif ^
-o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/longest_flowpath.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 29/10/2018</p>
<p><a name="MaxUpslopeFlowpathLength"></a></p>
<a class="header" href="#maxupslopeflowpathlength" id="maxupslopeflowpathlength"><h1>MaxUpslopeFlowpathLength</h1></a>
<p>Measures the maximum length of all upslope flowpaths draining each grid cell.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.max_upslope_flowpath_length(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=MaxUpslopeFlowpathLength -v ^
--wd=&quot;/path/to/data/&quot; -i=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/max_upslope_flowpath.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: June 25, 2017</p>
<p><a name="NumInflowingNeighbours"></a></p>
<a class="header" href="#numinflowingneighbours" id="numinflowingneighbours"><h1>NumInflowingNeighbours</h1></a>
<p>Computes the number of inflowing neighbours to each cell in an input DEM based on the D8 algorithm.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.num_inflowing_neighbours(
    dem, 
    output, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=NumInflowingNeighbours -v ^
--wd=&quot;/path/to/data/&quot; -i=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/num_inflowing_neighbours.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: June 25, 2017</p>
<p><a name="RaiseWalls"></a></p>
<a class="header" href="#raisewalls" id="raisewalls"><h1>RaiseWalls</h1></a>
<p>This tool is used to increment the elevations in a digital elevation model (DEM) along
the boundaries of a vector lines or polygon layer. The user must specify the name of the
raster DEM (<code>--dem</code>), the vector file (<code>--input</code>), the output file name (<code>--output</code>), the
increment height (<code>--height</code>), and an optional breach lines vector layer (<code>--breach</code>).
The breach lines layer can be used to breach a whole in the raised walls at intersections
with the wall layer.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, walls, --input </td><td> Input vector lines or polygons file</td></tr>
<tr><td>--breach           </td><td> Optional input vector breach lines</td></tr>
<tr><td>--dem              </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--height           </td><td> Wall height</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.raise_walls(
    i, 
    dem, 
    output, 
    breach=None, 
    height=100.0, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=RaiseWalls -v --wd=&quot;/path/to/data/&quot; ^
-i=watershed.shp --dem=dem.tif -o=output.tif ^
--height=25.0
&gt;&gt;./whitebox_tools -r=RaiseWalls -v ^
--wd=&quot;/path/to/data/&quot; -i=watershed.shp --breach=outlet.shp ^
--dem=dem.tif -o=output.tif --height=25.0 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/raise_walls.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 22/04/2018</p>
<p><a name="Rho8Pointer"></a></p>
<a class="header" href="#rho8pointer" id="rho8pointer"><h1>Rho8Pointer</h1></a>
<p>Calculates a stochastic Rho8 flow pointer raster from an input DEM.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.rho8_pointer(
    dem, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Rho8Pointer -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/rho8_pointer.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: July 16, 2017</p>
<p><a name="Sink"></a></p>
<a class="header" href="#sink" id="sink"><h1>Sink</h1></a>
<p>This tool identifies each sink (i.e. topographic depression) in a raster digital elevation model (DEM). A
sink, or depression, is a bowl-like landscape feature, which is characterized by interior drainage. Each
identified sink in the input DEM is assigned a unique, non-zero, positive value in the ouput raster. The
<a href="./hydrological_analysis.html#sink"><strong>Sink</strong></a> tool essentially runs the <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool followed by the <a href="./gis_analysis.html#clump"><strong>Clump</strong></a> tool on all modified grid
cells.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./gis_analysis.html#clump"><strong>Clump</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--zero_background  </td><td> Flag indicating whether a background value of zero should be used</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.sink(
    dem, 
    output, 
    zero_background=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Sink -v --wd=&quot;/path/to/data/&quot; ^
--dem=DEM.tif -o=output.tif --zero_background 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/sink.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 01/07/2017</p>
<p><a name="SnapPourPoints"></a></p>
<a class="header" href="#snappourpoints" id="snappourpoints"><h1>SnapPourPoints</h1></a>
<p>The <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> tool can be used to move the location of vector pour points (i.e. outlets used in a <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>
operation) (<code>--pour_pts</code>) to the location coincident with the highest flow accumulation (<code>--flow_accum</code>) value within
a specified maximum distance (<code>--snap_dist</code>). The pour points file (<code>--pour_pts</code>) must be a vector file of <em>Point</em> ShapeType.</p>
<p>If the output of the <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> tool is to be used with the <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> tool, the flow accumulation raster should
be generated using the <a href="./hydrological_analysis.html#d8flowaccumulation"><strong>D8FlowAccumulation</strong></a> algorithm. The snap distance (<code>--snap_dist</code>), measured in map units (e.g.
meters), must also be specified. This distance will serve as the search radius placed around each pour point during the
search for the maximum flow accumulation. In general, each outlet will be relocated the distance specified by the snap
distance.</p>
<p>Lindsay et al. (2008) provide a detailed discussion of the <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> technique, and other more sophisticated
techniques for adjusting pour point locations used in watershedding operations including Jenson's snap pour points
(<a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a>) method. In most cases, the <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a> tool should be prefered for applications of
repositioning outlet points used in watershedding operations onto the digital stream lines contained in local drainage
direction rasters. Jenson's method relocates outlet points to the <em>nearest</em> stream cell while <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> relocated
outlets to the <em>largest</em> stream (designated by the largest flow accumulation value). In the common situation where outlet
cells are position near the confluence point of smaller tributary streams, the <a href="./hydrological_analysis.html#snappourpoints"><strong>SnapPourPoints</strong></a> tool may re-position
outlets on the main-trunk stream, which will result in watershed delineation of incorrect sub-basins.</p>
<p><em>Reference</em>:</p>
<p>Lindsay JB, Rothwell JJ, and Davies H. 2008. Mapping outlet points used for watershed delineation onto DEM-derived stream
networks, Water Resources Research, 44, W08442, doi:10.1029/2007WR006507.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a>, <a href="./hydrological_analysis.html#d8flowaccumulation"><strong>D8FlowAccumulation</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--pour_pts         </td><td> Input vector pour points (outlet) file</td></tr>
<tr><td>--flow_accum       </td><td> Input raster D8 flow accumulation file</td></tr>
<tr><td>-o, --output       </td><td> Output vector file</td></tr>
<tr><td>--snap_dist        </td><td> Maximum snap distance in map units</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.snap_pour_points(
    pour_pts, 
    flow_accum, 
    output, 
    snap_dist, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=SnapPourPoints -v --wd=&quot;/path/to/data/&quot; ^
--pour_pts='pour_pts.shp' --flow_accum='d8accum.tif' ^
-o='output.shp' --snap_dist=15.0 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/snap_pour_points.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 27/072017</p>
<p><a name="StochasticDepressionAnalysis"></a></p>
<a class="header" href="#stochasticdepressionanalysis" id="stochasticdepressionanalysis"><h1>StochasticDepressionAnalysis</h1></a>
<p>This tool performs a stochastic analysis of depressions within a DEM, calculating the
probability of each cell belonging to a depression. This land-surface prameter
(p<sub>dep</sub>) has been widely applied in wetland and bottom-land mapping applications.</p>
<p>This tool differs from the original Whitebox GAT tool in a few significant ways:</p>
<ol>
<li>
<p>The Whitebox GAT tool took an error histogram as an input. In practice people found
it difficult to create this input. Usually they just generated a normal distribution
in a spreadsheet using information about the DEM root-mean-square-error (RMSE). As
such, this tool takes a RMSE input and generates the histogram internally. This is
more convienent for most applications but loses the flexibility of specifying the
error distribution more completely.</p>
</li>
<li>
<p>The Whitebox GAT tool generated the error fields using the turning bands method.
This tool generates a random Gaussian error field with no spatial autocorrelation
and then applies local spatial averaging using a Gaussian filter (the size of
which depends of the error autocorrelation length input) to increase the level of
autocorrelation. We use the Fast Almost Gaussian Filter of Peter Kovesi (2010),
which uses five repeat passes of a mean filter, based on an integral image. This
filter method is highly efficient. This results in a significant performance
increase compared with the original tool.</p>
</li>
<li>
<p>Parts of the tool's workflow utilize parallel processing. However, the depression
filling operation, which is the most time-consuming part of the workflow, is
not parallelized.</p>
</li>
</ol>
<p>In addition to the input DEM (<code>--dem</code>) and output p<sub>dep</sub> file name (<code>--output</code>), the user
must specify the nature of the error model, including the root-mean-square error (<code>--rmse</code>) and
the error field correlation length (<code>--range</code>). These parameters determine the statistical frequency
distribution and spatial characteristics of the modeled error fields added to the DEM in each
iteration of the simulation. The user must also specify the number of iterations (<code>--iterations</code>).
A larger number of iterations will produce a smoother p<sub>dep</sub> raster.</p>
<p>This tool creates several temporary rasters in memory and, as a result, is very memory hungry.
This will necessarily limit the size of DEMs that can be processed on more memory-constrained
systems. As a rough guide for usage, <strong>the computer system will need 6-10 times more memory than
the file size of the DEM</strong>. If your computer possesses insufficient memory, you may consider
splitting the input DEM apart into smaller tiles.</p>
<p><em>Reference</em>:</p>
<p>Lindsay, J. B., &amp; Creed, I. F. (2005). Sensitivity of digital landscapes to artifact depressions in
remotely-sensed DEMs. Photogrammetric Engineering &amp; Remote Sensing, 71(9), 1029-1036.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#impoundmentsizeindex"><strong>ImpoundmentSizeIndex</strong></a>, <a href="./image_processing_tools_filters.html#fastalmostgaussianfilter"><strong>FastAlmostGaussianFilter</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>-i, --dem          </td><td> Input raster DEM file</td></tr>
<tr><td>-o, --output       </td><td> Output file</td></tr>
<tr><td>--rmse             </td><td> The DEM's root-mean-square-error (RMSE), in z units. This determines error magnitude</td></tr>
<tr><td>--range            </td><td> The error field's correlation length, in xy-units</td></tr>
<tr><td>--iterations       </td><td> The number of iterations</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.stochastic_depression_analysis(
    dem, 
    output, 
    rmse, 
    range, 
    iterations=100, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=StochasticDepressionAnalysis -v ^
--wd=&quot;/path/to/data/&quot; --dem=DEM.tif -o=out.tif --rmse=10.0 ^
--range=850.0 --iterations=2500 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/stochastic_depression_analysis.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 11/05/2018</p>
<p><a name="StrahlerOrderBasins"></a></p>
<a class="header" href="#strahlerorderbasins" id="strahlerorderbasins"><h1>StrahlerOrderBasins</h1></a>
<p>This tool will identify the catchment areas of each Horton-Strahler stream order link in a user-specified
stream network (<code>--streams</code>), i.e. the network's <em>Strahler basins</em>. The tool effectively performs a Horton-Strahler
stream ordering operation (<a href="./stream_network_analysis.html#hortonstreamorder"><strong>HortonStreamOrder</strong></a>) followed by by a <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> operation. The user must specify the name of a
flow pointer (flow direction) raster (<code>--d8_pntr</code>), a streams raster (<code>--streams</code>), and the output raster
(<code>--output</code>). The flow pointer and streams rasters should be generated using the <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a> algorithm. This
will require a depressionless DEM, processed using either the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool.</p>
<p>By default, the pointer raster is assumed to use the clockwise indexing method used by WhiteboxTools.
If the pointer file contains ESRI flow direction values instead, the <code>--esri_pntr</code> parameter must be specified.</p>
<p>NoData values in the input flow pointer raster are assigned NoData values in the output image.</p>
<p><em>See Also</em>:</p>
<p><a href="./stream_network_analysis.html#hortonstreamorder"><strong>HortonStreamOrder</strong></a>, <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input raster D8 pointer file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.strahler_order_basins(
    d8_pntr, 
    streams, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=StrahlerOrderBasins -v ^
--wd=&quot;/path/to/data/&quot; --d8_pntr='d8pntr.tif' ^
--streams='streams.tif' -o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/strahler_basins.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 13/07/2017</p>
<p><a name="Subbasins"></a></p>
<a class="header" href="#subbasins" id="subbasins"><h1>Subbasins</h1></a>
<p>This tool will identify the catchment areas to each link in a user-specified stream network, i.e. the
network's sub-basins. <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a> effectively performs a stream link ID operation (<a href="./stream_network_analysis.html#streamlinkidentifier"><strong>StreamLinkIdentifier</strong></a>) followed by
a <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> operation. The user must specify the name of a flow pointer (flow direction) raster (<code>--d8_pntr</code>),
a streams raster (<code>--streams</code>), and the output raster (<code>--output</code>). The flow pointer and streams rasters should
be generated using the <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a> algorithm. This will require a depressionless DEM, processed using either
the <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> or <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a> tool.</p>
<p><a href="./hydrological_analysis.html#hillslopes"><strong>Hillslopes</strong></a> are conceptually similar to sub-basins, except that sub-basins do not distinguish between the
right-bank and left-bank catchment areas of stream links. The Sub-basins tool simply assigns a unique identifier
to each stream link in a stream network.</p>
<p>By default, the pointer raster is assumed to use the clockwise indexing method used by WhiteboxTools.
If the pointer file contains ESRI flow direction values instead, the <code>--esri_pntr</code> parameter must be specified.</p>
<p>NoData values in the input flow pointer raster are assigned NoData values in the output image.</p>
<p><em>See Also</em>:</p>
<p><a href="./stream_network_analysis.html#streamlinkidentifier"><strong>StreamLinkIdentifier</strong></a>, <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a>, <a href="./hydrological_analysis.html#hillslopes"><strong>Hillslopes</strong></a>, <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>--streams          </td><td> Input raster streams file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.subbasins(
    d8_pntr, 
    streams, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Subbasins -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr='d8pntr.tif' --streams='streams.tif' ^
-o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/subbasins.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 01/07/2017</p>
<p><a name="TraceDownslopeFlowpaths"></a></p>
<a class="header" href="#tracedownslopeflowpaths" id="tracedownslopeflowpaths"><h1>TraceDownslopeFlowpaths</h1></a>
<p>This tool can be used to mark the flowpath initiated from user-specified locations downslope and
terminating at either the grid's edge or a grid cell with undefined flow direction. The user must
input the name of a D8 flow pointer grid (<code>--d8_pntr</code>) and an input vector file indicating the location
of one or more initiation points, i.e. 'seed points' (<code>--seed_pts</code>). The seed point file must be a
vector of the POINT ShapeType. Note that the flow pointer should be generated from a DEM that has
been processed to remove all topographic depression (see <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a> and <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>) and
created using the D8 flow algorithm (<a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>).</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a>, <a href="./hydrological_analysis.html#downslopeflowpathlength"><strong>DownslopeFlowpathLength</strong></a>, <a href="./hydrological_analysis.html#downslopedistancetostream"><strong>DownslopeDistanceToStream</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--seed_pts         </td><td> Input vector seed points file</td></tr>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
<tr><td>--zero_background  </td><td> Flag indicating whether a background value of zero should be used</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.trace_downslope_flowpaths(
    seed_pts, 
    d8_pntr, 
    output, 
    esri_pntr=False, 
    zero_background=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=TraceDownslopeFlowpaths -v ^
--wd=&quot;/path/to/data/&quot; --seed_pts=seeds.shp ^
--flow_dir=flow_directions.tif --output=flow_paths.tif 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/trace_downslope_flowpaths.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: July 4, 2017</p>
<p><a name="UnnestBasins"></a></p>
<a class="header" href="#unnestbasins" id="unnestbasins"><h1>UnnestBasins</h1></a>
<p>In some applications it is necessary to relate a measured variable for a group of
hydrometric stations (e.g. characteristics of flow timing and duration or water
chemistry) to some characteristics of each outlet's catchment (e.g. mean slope,
area of wetlands, etc.). When the group of outlets are nested, i.e. some stations
are located downstream of others, then performing a watershed operation will
result in inappropriate watershed delineation. In particular, the delineated
watersheds of each nested outlet will not include the catchment areas of upstream
outlets. This creates a serious problem for this type of application.</p>
<p>The Unnest Basin tool can be used to perform a watershedding operation based on a
group of specified pour points, i.e. outlets or target cells, such that each
complete watershed is delineated. The user must specify the name of a flow pointer
(flow direction) raster, a pour point raster, and the name of the output rasters.
Multiple numbered outputs will be created, one for each nesting level. Pour point,
or target, cells are denoted in the input pour-point image as any non-zero,
non-NoData value. The flow pointer raster should be generated using the D8
algorithm.</p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>--pour_pts         </td><td> Input vector pour points (outlet) file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.unnest_basins(
    d8_pntr, 
    pour_pts, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=UnnestBasins -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr='d8pntr.tif' --pour_pts='pour_pts.shp' ^
-o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/unnest_basins.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 27/04/2018</p>
<p><a name="Watershed"></a></p>
<a class="header" href="#watershed" id="watershed"><h1>Watershed</h1></a>
<p>This tool will perform a watershedding operation based on a group of input vector pour points (<code>--pour_pts</code>),
i.e. outlets or points-of-interest. Watershedding is a procedure that identifies all of the cells upslope of
a cell of interest (pour point) that are connected to the pour point by a flow-path. The user must specify the
name of a D8-derived flow pointer (flow direction) raster (<code>--d8_pntr</code>), a vector pour point file (<code>--pour_pts</code>),
and the output raster (<code>--output</code>). The pour points must be of a Point ShapeType (i.e. Point, PointZ, PointM,
MultiPoint, MultiPointZ, MultiPointM). Watersheds will be assigned the input pour point FID value. The flow
pointer raster must be generated using the D8 algorithm, <a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>.</p>
<p>Pour point vectors can be attained by on-screen digitizing to designate these points-of-interest locations.
Because pour points are usually, although not always, situated on a stream network, it is recommended that you
use Jenson's method (<a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a>) to snap pour points on the stream network. This will ensure that
the digitized outlets are coincident with the digital stream contained within the DEM flowpaths. If this is not
done prior to inputting a pour-point set to the <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> tool, anomalously small watersheds may be ouput, as
pour points that fall off of the main flow path (even by one cell) in the D8 pointer will yield very different
catchment areas.</p>
<p>By default, the pointer raster is assumed to use the clockwise indexing method used by WhiteboxTools.
If the pointer file contains ESRI flow direction values instead, the <code>--esri_pntr</code> parameter must be specified.</p>
<p>There are several tools that perform similar watershedding operations in WhiteboxTools. <a href="./hydrological_analysis.html#watershed"><strong>Watershed</strong></a> is appropriate
to use when you have a set of specific locations for which you need to derive the watershed areas. Use the <a href="./hydrological_analysis.html#basins"><strong>Basins</strong></a>
tool instead when you simply want to find the watersheds draining to each outlet situated along the edge of a
DEM. The <a href="./hydrological_analysis.html#isobasins"><strong>Isobasins</strong></a> tool can be used to divide a landscape into roughly equally sized watersheds. The <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a>
and <a href="./hydrological_analysis.html#strahlerorderbasins"><strong>StrahlerOrderBasins</strong></a> are useful when you need to find the areas draining to each link within a stream network.
Finally, <a href="./hydrological_analysis.html#hillslopes"><strong>Hillslopes</strong></a> can be used to idenfity the areas draining the each of the left and right banks of a stream
network.</p>
<p><em>Reference</em>:</p>
<p>Jenson, S. K. (1991), Applications of hydrological information automati-cally extracted from digital elevation
models, Hydrological Processes, 5, 31–44, doi:10.1002/hyp.3360050104.</p>
<p>Lindsay JB, Rothwell JJ, and Davies H. 2008. Mapping outlet points used for watershed delineation onto DEM-derived
stream networks, Water Resources Research, 44, W08442, doi:10.1029/2007WR006507.</p>
<p><em>See Also</em>:</p>
<p><a href="./hydrological_analysis.html#d8pointer"><strong>D8Pointer</strong></a>, <a href="./hydrological_analysis.html#basins"><strong>Basins</strong></a>, <a href="./hydrological_analysis.html#subbasins"><strong>Subbasins</strong></a>, <a href="./hydrological_analysis.html#isobasins"><strong>Isobasins</strong></a>, <a href="./hydrological_analysis.html#strahlerorderbasins"><strong>StrahlerOrderBasins</strong></a>, <a href="./hydrological_analysis.html#hillslopes"><strong>Hillslopes</strong></a>, <a href="./hydrological_analysis.html#jensonsnappourpoints"><strong>JensonSnapPourPoints</strong></a>,
<a href="./hydrological_analysis.html#breachdepressions"><strong>BreachDepressions</strong></a>, <a href="./hydrological_analysis.html#filldepressions"><strong>FillDepressions</strong></a></p>
<p><em>Parameters</em>:</p>
<table><thead><tr><th><strong>Flag</strong>            </th><th>  <strong>Description</strong></th></tr></thead><tbody>
<tr><td>--d8_pntr          </td><td> Input D8 pointer raster file</td></tr>
<tr><td>--pour_pts         </td><td> Input vector pour points (outlet) file</td></tr>
<tr><td>-o, --output       </td><td> Output raster file</td></tr>
<tr><td>--esri_pntr        </td><td> D8 pointer uses the ESRI style scheme</td></tr>
</tbody></table>
<p><em>Python function</em>:</p>
<pre><code class="language-python">wbt.watershed(
    d8_pntr, 
    pour_pts, 
    output, 
    esri_pntr=False, 
    callback=default_callback
)
</code></pre>
<p><em>Command-line Interface</em>:</p>
<pre><code>&gt;&gt;./whitebox_tools -r=Watershed -v --wd=&quot;/path/to/data/&quot; ^
--d8_pntr='d8pntr.tif' --pour_pts='pour_pts.shp' ^
-o='output.tif' 
</code></pre>
<p><a href="https://github.com/jblindsay/whitebox-tools//tree/master/src/tools/hydro_analysis/watershed.rs">Source code on GitHub</a></p>
<p><em>Author</em>: Dr. John Lindsay</p>
<p><em>Created</em>: 22/06/2017</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../available_tools/gis_analysis_patch_shape_tools.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../available_tools/image_processing_tools.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../available_tools/gis_analysis_patch_shape_tools.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../available_tools/image_processing_tools.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
